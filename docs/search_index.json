[["index.html", "Analizando datos, visualizando informaci√≥n, contando historias Prefacio", " Analizando datos, visualizando informaci√≥n, contando historias Javier √Ålvarez Li√©bana, Gabriel Valverde Castilla, Borja Andrino, Vict√≤ria Oliveres, Dominic Roy√© √öltima actualizaci√≥n: 27-12-2021 Prefacio Este material ha sido dise√±ado como complemento y recursos de apoyo al curso de la Escuela de Invierno de la UCM titulado ¬´Analizando datos, visualizando informaci√≥n, contando historias¬ª, celebrado presencialmente del 31 de enero al 4 de febrero de 2022 (16:00 a 21:00 horas, de lunes a viernes). El presente material introductorio ha sido elaborado por Javier √Ålvarez Li√©bana y Gabriel Valverde Castilla, y tiene como objetivo introducir en el lenguaje R a todas aquellas personas que quieran aprender R desde cero. Dicho manual ha sido elaborado a su vez en R con {bookdown}. Puedes ver un resumen de las funcionalidades de algunos paquetes documentados por el equipo de R Studio en sus esquemas resumen. El c√≥digo de dicho manual se encuentra en GitHub. Para elaborar informes o libros con una estructura similar (de forma nativa en R) el paquete {bookdown} puede ser instalado desde la plataforma CRAN o desde su versi√≥n en desarrollo actualizada en Github: install.packages(&quot;bookdown&quot;) # o desde su versi√≥n en desarrollo actualizada # devtools::install_github(&quot;rstudio/bookdown&quot;) "],["prop√≥sito.html", "Prop√≥sito", " Prop√≥sito El objetivo de este curso es introducir a la programaci√≥n y an√°lisis estad√≠stico en R a toda aquella persona que nunca se haya iniciado en √©l, sin necesitar conocimientos previos de programaci√≥n (aunque siempre ayuda, obviamente). No se pretende que adquieras un vasto y experto conocimiento de R, pero si lo suficiente como para lograr 5 objetivos: No tener miedo a programar Entender los conceptos b√°sicos de R. Dotarte de autonom√≠a para poder trabajar con datos. Introducirte en el an√°lisis estad√≠stico. Adquirir las competencias necesarias para la visualizaci√≥n de datos en R. "],["contenidos.html", "Contenidos", " Contenidos 1 Requisitos 2 Instalaci√≥n de R y Rstudio 3 ¬øQu√© es R? 4 Primeros pasos 5 Tipos de datos ?? Vectores "],["c√≥digo-de-colores.html", "C√≥digo de colores", " C√≥digo de colores Puedes buscar los siguientes t√©rminos en el buscador del documento ERROR: En color rojo encontrar√°s errores comunes o pr√°cticas a evitar. WARNING: En color naranja/amarillo encontrar√°s warnings o advertencias sobre cosas a tener en cuenta para evitar problemas. Algunas funciones pueden arrojar ciertas advertencias que nunca est√° de m√°s leer. Pero si dichos mensajes de alerta los tenemos controlados, y no queremos que nos ensucie la ejecuci√≥n en la consola, podemos poner al inicio del c√≥digo assign(&quot;last.warning&quot;, NULL, envir = baseenv()) para limpiar los warnings antiguos y options(warn = -1) para desactivarlos. CONSEJO: En color verde encontrar√°s consejos o tips para ampliar y facilitar tu programaci√≥n. Adem√°s en cada cajita de c√≥digo, si pasas el rat√≥n, encontrar√°s un bot√≥n üìÑüìÑ en la esquina superior derecha de la caja para copiar el c√≥digo directamente a tu consola. Puedes encontrarlos todos escribiendo ¬´consejo¬ª en el buscador. GLOSARIO: En color azul encontrar√°s un üìö glosario con algunos t√©rminos estad√≠sticos y conceptos b√°sicos. "],["licencia.html", "Licencia", " Licencia Este documento es publicado bajo licencia p√∫blica general GNU, una licencia libre de copyleft que garantiza a los usuarios finales (personas, organizaciones, compa√±√≠as) la libertad de usar, estudiar, compartir (copiar) y modificar el software, citando adecuadamente al autor del mismo. "],["requisitos.html", "Cap√≠tulo 1 Requisitos", " Cap√≠tulo 1 Requisitos Conexi√≥n a internet (para la descarga de algunos datos y paquetes). Instalar R (ver 2.1). R ser√° nuestro lenguaje, nuestro diccionario, nuestro castellano, nuestra ortograf√≠a para poder ¬´comunicarnos¬ª con el ordenador. https://cran.r-project.org/ Instalar R Studio (ver 2.2). De la misma manera que podemos escribir el mismo texto en castellano en una tablet, en un ordenador, en un Word, en un papel o en un tuit, en programaci√≥n podemos usar distintos IDE (entornos de desarrollo integrados, nuestro Office), para que el trabajo sea m√°s c√≥modo. Nosotros trabajaremos con RStudio. Todo lo necesario para seguir este curso es de descarga gratuita: viva el software libre. "],["instalacion.html", "Cap√≠tulo 2 Instalaci√≥n", " Cap√≠tulo 2 Instalaci√≥n En breve daremos nuestros primeros pasos en R pero antes necesitamos instalar algunas cosas. No vamos a necesitar tantas, y para entender lo que instalamos pensaremos que vamos a escribir un libro. ¬øQu√© necesitamos? Gram√°tica/ortograf√≠a: en nuestro caso ser√° R, el lenguaje de programaci√≥n que usaremos. Word: al igual que podemos escribir en castellano de distintas maneras (en un Word, un post-it, un cuaderno, etc), cuando programamos podemos trabajar en distintos entornos de desarrollo (IDE). En nuestro caso escribiremos y programaremos en RStudio, el programa que ser√° nuestro Word para escribir en lenguaje R. "],["instalacionR.html", "2.1 Instalaci√≥n de R", " 2.1 Instalaci√≥n de R Vamos a necesitar solo 3 pasos (y conexi√≥n a internet). Paso 1: entra en la web oficial de R https://cran.r-project.org/. En la pantalla de inicio selecciona la instalaci√≥n acorde a tu sistema operativo (ver imagen 2.1) Imagen/gr√°fica 2.1: Pantalla inicial de la plataforma CRAN de R. Paso 2: para sistemas operativos Mac basta con que hacer click en el archivo .pkg, y abrirlo una vez descargado (ver imagen 2.2) Imagen/gr√°fica 2.2: Pantalla de instalaci√≥n de R en Mac OS. Para sistemas operativos Windows, debemos clickar en install R for the first time (ver imagen 2.3) y en la siguiente pantalla hacer click en Download R for Windows (ver imagen 2.4). Una vez descargado, abrirlo como cualquier archivo de instalaci√≥n. Imagen/gr√°fica 2.3: Pantalla previa de instalaci√≥n de R en Windows. Imagen/gr√°fica 2.4: Pantalla final de instalaci√≥n de R en Windows. Paso 3: tras su instalaci√≥n tendr√°s en tu escritorio (Windows) o en tu Launchpad (Mac Os) un ejecutable de R para abrir. En Windows puede que tengas dos ejecutables i386 y x64 (como todo programa en Windows, est√° la versi√≥n de 32 y de 64 bits, haz click preferiblemente - si lo tienes - en el de x64). Te saldr√° algo parecido a lo que observas en la imagen 2.5. Imagen/gr√°fica 2.5: Primera pantalla al abrir el ejecutable de R. 2.1.1 Primera operaci√≥n: sumar dos n√∫meros Para comprobar que est√° correctamente instalado, abre R y prueba a escribir en la pantalla blanca inferior el siguiente c√≥digo (recuerda: los c√≥digos de este manual puedes copiarlos directamente de la cajita haciendo click en el bot√≥n de la esquina superior derecha) a &lt;- 1 b &lt;- 2 a + b ## [1] 3 Imagen/gr√°fica 2.6: Primera suma en la consola de R. ¬°Enhorabuena! ¬øD√≥nde hemos escrito ese c√≥digo? Esa pantalla blanca donde hemos escrito el c√≥digo se llama CONSOLA, y ser√° donde ejecutaremos las √≥rdenes. ¬øQu√© hemos hecho? Hemos hecho m√°s de lo que parece. Primero, hemos definido dos variables a y b asign√°ndole un valor num√©rico a cada una de ellas. Imagina que el s√≠mbolo &lt;- es visto en nuestra cabeza como una flecha: a una variable que llamamos a le asignamos el valor 1, a una variable que llamamos b le asignamos el valor 2. Podemos verlo como \\(a = 1,~b = 2\\). Y tras definir dichas variables, las hemos usado en una operaci√≥n aritm√©tica a + b. Ya sabemos usar R como calculadora. ¬øC√≥mo nos devuelve R el resultado de la operaci√≥n? Si te ha devuelto el resultado correcta, en la consola debe aparecer [1] 3. El valor [1] aparecer√° siempre ya que simplemente nos numera las l√≠neas de la consola usadas; lo que viene detr√°s es realmente el resultado, es decir, \\(a + b = 3\\). ¬øPor qu√© hemos escrito a + b al final? Un mantra de R, que veremos a lo largo de todo el curso, es que R intenta molestarte lo menos posible (eso es bueno cuando ya sabes usarlo, no tan bueno cuando empezamos a aprenderlo). Cuando asignamos los valores a &lt;- 1 y b &lt;- 2, R no nos muestra nada: si guardamos un resultado en una variable, no nos muestra nada por consola. Para obtener el resultado en la consola necesitamos escribir el nombre de las variables (u operaciones entre ellas, como a + b). WARNING: Como habr√°s advertido, en R usaremos &lt;- para asignar valores en lugar de =, como una flecha. Usaremos = para indicarle el valor a los argumentos que usemos en funciones y == como operador de comparaci√≥n: si escribimos 2 == 3, le estamos preguntando si 2 es igual a 3. 2 == 3 ## [1] FALSE Bonita esta interfaz no es, as√≠ que la cerraremos y no la abriremos m√°s. Tenemos nuestro lenguaje instalado, vamos a instalar nuestro Word para poder programar de forma c√≥moda. "],["instalacionRStudio.html", "2.2 Instalaci√≥n de R Studio", " 2.2 Instalaci√≥n de R Studio Para instalar RStudio deberemos ir a la web https://www.rstudio.com/products/rstudio/download/#download (el gratuito) y seleccionar el ejecutable que te aparezca acorde a tu sistema operativo (ver imagen 2.7). Tras descargar el ejecutable, hay que abrirlo como otro cualquier otro ejecutable y dejar que termine la instalaci√≥n. Imagen/gr√°fica 2.7: Descargar el ejecutable de RStudio para su posterior instalaci√≥n. Tras instalar tendremos en el escritorio o Launchpad un ejecutable de RStudio que abriremos. Se nos aparecer√° una pantalla similar a esta: Imagen/gr√°fica 2.8: Primer recibimiento de nuestro mejor amigo RStudio. Listo, tienes instalado (casi) todo correctamente. "],["glosario.html", "2.3 Glosario", " 2.3 Glosario GLOSARIO Consola: es el nombre para llamar a esa ventana grande que te ocupa buena parte de tu pantalla. Prueba a escribir el mismo c√≥digo que antes en ella (es el equivalente a la consola de R que hemos abierto al principio). a &lt;- 1 b &lt;- 2 a + b Imagen/gr√°fica 2.9: Lanzando a consola nuestras primeras √≥rdenes en RStudio. La consola ser√° donde ejecutaremos √≥rdenes y mostraremos resultados Environment (entorno): la pantalla peque√±a (puedes ajustar los m√°rgenes con el rat√≥n a tu gusto) que tenemos en la parte superior derecha se denomina environment o entorno de variables, donde como puedes ver, tras ejecutar el peque√±o c√≥digo en la consola, nos informa de que tenemos dos variables num√©ricas y su valor asignado. Nos mostrar√° las variables que tenemos definidas, el tipo y su valor. Imagen/gr√°fica 2.10: Environment de variables. Panel multiusos: la ventana que tenemos en la parte inferior derecha no servir√° para buscar ayuda de comandos y √≥rdenes, adem√°s de para visualizar gr√°ficos. Lo veremos cuando sea necesario. Imagen/gr√°fica 2.11: Panel multiusos. "],["consejos.html", "2.4 Consejos", " 2.4 Consejos CONSEJOS ¬øC√≥mo saber cuando la orden lanzada en consola ha terminado? A veces R y RStudio son tan silenciosos que no sabemos si ha acabado la orden que acabamos de lanzar en la consola o no. Siempre que veas el s√≠mbolo &gt; como √∫ltima l√≠nea en la consola significa que est√° listo para que le escribamos otra orden (es la forma cari√±osa de decirte que ya ha acabado, ver imagen 2.12) Imagen/gr√°fica 2.12: Ejemplo de que la orden lanzada ha acabado. ¬øC√≥mo prevenir la fatiga programando? Estando delante de una pantalla de ordenador, con la vista muy fija mientras se programa, puede que acabes teniendo cierta fatiga visual en el trabajo. Te aconsejo que cambies en tu RStudio la tonalidad del fondo de tu programa, en tonos oscuros y no blancos (¬øte has fijado que mis capturas tienen un azul cobalto oscuro de fondo mientras el tuyo es un blanco nuclear? Echa un vistazo a las im√°genes 2.13 y 2.14) Imagen/gr√°fica 2.13: Men√∫ de opciones de nuestro editor Imagen/gr√°fica 2.14: Personalizar el color de fondo de nuestro editor, la letra y el tama√±o de fuente "],["que-es-R.html", "Cap√≠tulo 3 ¬øQu√© es R?", " Cap√≠tulo 3 ¬øQu√© es R? Una vez que tenemos todo instalado vamos a dar nuestros primeros pasos en R, pero antes veamos un poco de su historia y de una particularidad: R es un lenguaje modular (¬ømodu‚Ä¶qu√©?) "],["historia-de-r.html", "3.1 Historia de R", " 3.1 Historia de R Veamos antes un poco de la historia de nuestra deidad. All√° por 1975, los laboratorios Bell (los que inventaron la radio moderna tal y como la conocemos), necesitaban una alternativa a los lenguajes m√°s ¬´rudos¬ª y antiguos como C++ o Fortran, lenguajes r√°pidos en la ejecuci√≥n pero complejos en su uso, con una gran curva de aprendizaje y con muy poca capacidad en la visualizaci√≥n de datos que se empezaba a necesitar. As√≠ que en 1976 sacaron la primera versi√≥n del lenguaje conocido S (hasta entonces estaba de moda lo de llamar a los lenguajes con una sola inicial). En 1980 se empez√≥ a distribuir la primera versi√≥n p√∫blica de S, m√°s all√° de los laboratorios Bell, y en 1988 se a√±adieron bastantes funcionalidades nuevas como poder aplicar funciones a otras funciones (los famosos apply() que ya veremos). A√±os m√°s tarde, en 1991, dicho lenguaje se simplific√≥, reescribiendo muchas subrutinas de otros lenguajes m√°s primitivos, para tener una versi√≥n muy parecida al actual R, permitiendo el usod de operadores, data.frames (que veremos) y otro tipo de objetos, sencillos en la programaci√≥n pero muy versatiles. Sin embargo, salvo uso docente, S ten√≠a licencia as√≠ que en 1992 Ross Ihaka y Robert Gentleman se lanzaron a crear una versi√≥n de S libre y gratuita, un trabajo de casi 8 a√±os hasta que en el a√±o 2000, ambos investigadores de la Universidad de Auckland en Nueva Zelanda lanzaron la primera versi√≥n estable del lenguaje. Tras dicho lanzamiento, se cre√≥ un equipo de expertos en estad√≠stica computacional (el conocido como R Development Core Team) que es el que se encarga de mantener toda la aerquitectura de R y los que se encargar de actualizar y mejorar el paquete {base}, una librer√≠a motor sobre la que se construye el resto de funciones. Y es precisamente ese hecho una de las principales diferencias entre Python y R: R fue creado por y para estad√≠sticos. Te dejo esta entrada en el blog por si quieres curiosear las diferencias (aunque ambos pueden ser √∫tiles para trabajos estad√≠sticos muy generales). "],["instalacionpaquetes.html", "3.2 Comunidad de usuarios: paquetes", " 3.2 Comunidad de usuarios: paquetes La pregunta del mill√≥n suele ser siempre la misma: ¬øqu√© lenguaje elegir? Podr√≠amos hacer una comparativa t√©cnico de distintos lenguajes pero vamos a quedarnos con dos consejos fundamentales: prioriza el software libre y aquellos lenguajes que tienen una comunidad muy grande de usuarios trabajando en los problemas o campo para el que vas a usar dicho lenguaje. El lenguaje R (tambi√©n Python) tiene 3 ventajas principales: Es un lenguaje creado por y para estad√≠sticos/as. Es software libre (como C++, Python, Fortran, y otros tantos lenguajes). El software libre no solo tiene una ventaja evidente (es gratis, ok) sino que permite acceder libremente a c√≥digo ajeno. Es un lenguaje modular: en la instalaci√≥n que hemos realizado no se han instalado todas las funcionalidades, solo el m√≠nimo para poder funcionar, de forma que se ahorra espacio en disco y en memoria. Al ser software libre, existen trozos de c√≥digo hechos por otras personas llamados paquetes, que podemos ir instalando a nuestro gusto seg√∫n los vayamos necesitando. Esto es una ventaja enorme ya que R tiene una comunidad de usuarios gigante para hacer estad√≠stica (Python tiene una enorme comunidad pero m√°s enfocada al Machine Learning), con m√°s de 17 000 paquetes: ¬°hay m√°s de 17 000 trozos de c√≥digo, muchos de ellos programados por expertos/as en R, validados por la comunidad y la plataforma, y de forma gratuita! Imagen/gr√°fica 3.1: Paquetes disponibles en R. Esto nos ahorra much√≠simo tiempo en nuestro d√≠a a d√≠a ya que casi todo lo que querramos hacer ya lo habr√° querido hacer otra persona (y seguramente mejor que nosotros/as). Vamos a instalar, por ejemplo, un paquete gr√°fico ({ggplot2}) que necesitaremos en el futuro. Para ello, escribe en tu consola el siguiente c√≥digo y pulsa enter. install.packages(&quot;ggplot2&quot;) Dicha orden (puede tardar un poco la primera vez, depende de tu conexi√≥n a internet) lo que har√° ser√° acceder a la web de R, bajarse a tu ordenador los trozos de c√≥digo incluidos en el paquete llamado {ggplot2}, y dejarlos para siempre en √©l. WARNING: La instalaci√≥n de paquetes SOLO ES NECESARIA la primera vez que se usa dicho paquete en la vida del ordenador, no hace falta hacerlo cada vez que lo usas. Una vez que tenemos los trozos de c√≥digo (el paquete) en nuestro ordenador, en cada sesi√≥n de R que abramos (cada vez que cierres y abras RStudio) deberemos (si queremos) llamar a ese paquete que tenemos instalado, escribiendo el siguiente comando en consola library(ggplot2) Welcome to software libre "],["por-qu√©-excel-no-es-tu-amigo.html", "3.3 ¬øPor qu√© Excel no es tu amigo?", " 3.3 ¬øPor qu√© Excel no es tu amigo? R es un lenguaje de programaci√≥n, de alto nivel para el usuario y modular. Los lenguajes de alto nivel como R, Python (curso interactivo de Python en https://checkio.org/) o Matlab, facilitan la programaci√≥n al usuario, teniendo que preocuparte solo de la tarea de programar. Son lenguajes con una menor curva de aprendizaje aunque suelen ser m√°s lentos en su ejecuci√≥n en comparaci√≥n con lenguajes de bajo nivel (C, C++ o Fortran), lenguajes muy r√°pidos en su ejecuci√≥n pero cuya programaci√≥n requiere un mayor tiempo y formaci√≥n, teniendo que adem√°s estar pendiente del tipo de variables, espacio en memoria, etc. Por su arquitectura, R es un lenguaje que puede ser usado para un prop√≥sito general pero que est√° especialmente dise√±ado para el an√°lisis estad√≠stico de datos. Su modularidad nos da la ventaja de que podemos instalar las funcionalidades que vayamos necesitando de forma progresiva. ¬øPor qu√© no es recomendable usar Excel como base de datos ni para realizar an√°lisis estad√≠sticos complejos? Software de pago: Excel, al igual que el resto de programas de Microsoft o SPSS (por desgracia programa estrella de nuestro sistema sanitario), es un programa de pago. A nivel individual, todos hemos tenido una versi√≥n que no hemos pagado, pero dicha evasi√≥n no se la puede permitir una empresa o administraci√≥n, que debe de pagar altas cantidades de dinero anuales por las licencias, dinero que no ser√≠a necesario si los investigadores y trabajadores tuvieran formaci√≥n (remunerada) en otras herramientas de software libre. Software cerrado: no solo es de pago sino que es cerrado, as√≠ que solo podemos hacer lo que Excel ha cre√≠do que interesante que podamos hacer. Incluso con la programaci√≥n de MACROS, las funcionalidades de Excel siguen siendo mucho m√°s limitadas ya que viene ¬´programadas¬ª de antemano Alto consumo de memoria: dicha programaci√≥n predeterminada hace que Excel ocupe much√≠simo espacio en el disco duro y tenga un alto consumo de memoria (la memoria es lo que te permite hacer varias tareas a la vez en tu ordenador). No es universal: no solo es de pago sino que adem√°s, dependiendo de la versi√≥n que tengas de Excel, tendr√° un formato distinto para datos como fechas, teniendo incluso extensiones distintas, de forma que un archivo .xls abierto por un Excel moderno puede provocar errores en la carga. ¬°ES SOLO UNA HOJA DE C√ÅLCULO!: el propio Microsoft desaconseja el uso de Excel para el an√°lisis de grandes vol√∫menes de datos. El Excel es una herramienta maravillosa para ser usada como una sencilla hoja de c√°lculo: llevar las cuentas de tu familia, de tu peque√±o negocio, una declaraci√≥n de la Renta sencilla, planificar viajes, etc. Pero el programa NO EST√Å DISE√ëADO para ser una base de datos ni para an√°lisis detallado, y muchos menos pensado para generar un entorno flexible para el an√°lisis estad√≠stico y la visualizaci√≥n de datos. ¬øPuedes ser el mejor partiendo un filete con una cuchara? Seguramente puedas (en Excel puedes hasta programar con macros), y si siempre lo hiciste as√≠, acabar√°s normaliz√°ndolo, pero seguir√°s siendo una persona comiendo filete con cuchara. ¬øQu√© sucede si usamos la herramienta equivocada? Tres ejemplos: Problemas para codificar fechas: en 2016 se public√≥ una revisi√≥n de art√≠culos en gen√©tica, descubriendo que 1 de cada 5 art√≠culos conten√≠an errores debido a una mala codificaci√≥n de las fechas, conviertiendo por ejemplo los genes Septin-2 (conocido como SEPT2) en fechas, y al rev√©s (Ziemann, Eren, and El-Osta 2016). Imagen/gr√°fica 3.2: Excel en una noche loca. Problemas de memoria: un Excel permite por defecto una cantidad m√°xima de filas. Aunque dicha cantidad se puede ampliar, sigue siendo finita, por lo que cuando superas el umbral de filas, al a√±adir filas Excel te borra registros sin avisarte de que lo est√° haciendo. Esto es lo que sucedi√≥ con los registros de casos covid en Reino Unido. Imagen/gr√°fica 3.3: Cuando Excel dice basta. Problemas para codificar edades: una variable de tipo fecha, aunque nosotros la veamos con letras, en realidad es una variable num√©rica que representa los d√≠as que han pasado desde una fecha origen. En funci√≥n de las distintas versiones de Excel, dicha fecha origen cambia. Adem√°s, si se codifica mal la fecha en formato dd-mm-YY, dicho formato cuando se exporta a otro excel en texto, no permite distinguir a un nacido en 1918 y a un nacido en 2018, as√≠ que podemos estar confundiendo personas de 103 a√±os con ni√±os de 3 a√±os (y es lo que sucedi√≥ en Espa√±a, observando unas tasas de mortalidad en ni√±os muy peque√±os equivalentes a personas mayores). Imagen/gr√°fica 3.4: Los centenarios con biber√≥n. Bibliograf√≠a "],["glosario-1.html", "3.4 Glosario", " 3.4 Glosario GLOSARIO Paquete: trozos de c√≥digo realizadas por otros usuarios de la comunidad (y validades por el equipo de CRAN si la descarga es mediante install.packages()) para ser usados. Una vez instalados (descargados) los trozos de c√≥digo a nuestro ordenador, basta con ¬´acudir¬ª a ellos con library(). Haciendo una met√°fora con la colecci√≥n de libros que tengas en casa: con la instalaci√≥n hemos comprado el libro y lo tenemos en nuestra estanter√≠a (para siempre), con la llamada al paquete, por ejemplo library(ggplot2), lo que hacemos es decidir, de entre todos los libros de la estanter√≠a, cuales queremos llevarnos de viaje (en cada maleta que hagamos). Los paquetes usados los ver√°s denotados como {nombre_paquete} a lo largo del manual. "],["primeros-pasos.html", "Cap√≠tulo 4 Primeros pasos", " Cap√≠tulo 4 Primeros pasos Scripts usados: script01.R: ejercicio 4. Ver en https://github.com/dadosdelaplace/courses-ECI-2022/blob/main/scripts/script01.R Vamos a empezar por lo sencillo: ¬øc√≥mo usar R como una calculadora? "],["primeros-pasos-en-r-calculadora.html", "4.1 Primeros pasos en R: calculadora", " 4.1 Primeros pasos en R: calculadora ¬øTe acuerdas de lo que era la consola? En el caso de RStudio, la consola ser√° esa peque√±a pantalla que tenemos en la parte inferior (la pesta√±a Console). Vamos a trabajar de momento solo en esa ventana inferior. Imagen/gr√°fica 4.1: Lanzando a consola nuestras primeras √≥rdenes en RStudio. Lo que ya hemos descubierto en los pasos de la instalaci√≥n (ver imagen 4.1) es que la consola de R tiene una funci√≥n muy b√°sica y evidente: nos sirve de calculadora. Un ejemplo muy simple: si escribimos 3 en la consola y pulsamos ENTER, la consola nos mostrar√° el resultado de la suma 1 + 2 ## [1] 3 ¬øCu√°l es la diferencia entre una calculadora y un lenguaje de programaci√≥n? Imagina que dicha suma 3 la quisi√©ramos utilizar para un segundo c√°lculo: ¬øy si en lugar de lanzarlo a la consola sin m√°s lo almacenamos en alguna variable? Como hemos visto en la instalaci√≥n de RStudio, para asignar variables lo haremos con &lt;-, por ejemplo la orden x &lt;- 1 + 2: una variable de nombre x va a tener asignada lo que valga la suma 1 + 2 x &lt;- 1 + 2 Como puedes comprobar, en tu parte superior derecha (nuestro entorno de variables), podr√°s ver como una nueva variable x es ahora visualizada, con su valor asignado (no se mostrar√° en consola salvo que escribas 3 en ella: R asume que no quer√≠as visualizarla en consola sino solo guardarla). Imagen/gr√°fica 4.2: Environment. y &lt;- x - 3 x ## [1] 3 y ## [1] 0 x * y ## [1] 0 Dicha variable x adem√°s podemos reciclarla para definir, por ejemplo, una variable y, rest√°ndole una constante. De la misma manera que hemos hecho restas, sumas y multiplicaciones, R tiene todas las operaciones cl√°sicas que podr√≠as tener en una calculadora. Prueba a ejecutar en la consola las √≥rdenes x^2, sqrt(x) o abs(y): R calcular√° las operaciones elevar al cuadrado, ra√≠z cuadrada y valor absoluto (respectivaemnte) de la variable que tengan entre par√©ntesis x^2 ## [1] 9 sqrt(x) ## [1] 1.732051 y &lt;- x - 5 abs(y) ## [1] 2 "],["y-d√≥nde-programamos.html", "4.2 ¬øY d√≥nde programamos?", " 4.2 ¬øY d√≥nde programamos? ¬øEst√°s emocionado/a? Vamos a abrir nuestro primer script. Un script ser√° el documento en el que programamos, nuestro .doc, pero aqu√≠ ser√° un archivo con extensi√≥n .R, donde escribiremos las √≥rdenes, que nos evitar√° estar lanzando todo a consola. ¬øPor qu√© no abusar de la consola? Una m√°xima para no olvidar: TODO lo que no escribas en un script, cuando cierres RStudio, lo habr√°s perdido (c√≥mo si en lugar de escribir en un Word y guardarlo, nunca guardases el documento). Para abrir nuestro primero script, haz click en el men√∫ superior en File &lt;&lt; New File &lt;&lt; R Script como se muestra en la imagen 4.3 Imagen/gr√°fica 4.3: Abriendo nuestro primer script de R. Tras abrirlo tendremos una cuarta ventana: esta ser√° la ventana de nuestros c√≥digos, la ventana m√°s importante ya que es donde escribiremos lo que queremos ejecutar. Escribe el c√≥digo de la suma de arriba en ese script y guarda el archivo haciendo click en el bot√≥n Save current document a &lt;- 1 b &lt;-2 a + b ## [1] 3 Imagen/gr√°fica 4.4: Escribiendo y guardando nuestro primer script. Ese c√≥digo no se ejecuta salvo que se lo digamos. Tenemos tres opciones para ejecutar c√≥digo: Copiar y pegar el trozo de c√≥digo en la consola (como hemos hecho al principio). Seleccionar l√≠neas de c√≥digo y clickar en Run (o con su atajo de teclado), lo que har√° que se ejecute solo las l√≠neas seleccionadas. Activar el cuadrado Source on save a la derecha del bot√≥n de guardar y volvemos a hacer click en el bot√≥n de guardar: siempre que esa opci√≥n est√© activada, al guardar no solo es nos guarda el archivo .R sino que adem√°s se ejecuta el c√≥digo completo que tengas en el script. "],["tipos_errores.html", "4.3 Tipos de errores", " 4.3 Tipos de errores Durante tu aprendizaje en R va a ser muy habitual que las cosas no salgan a la primera, apareciendo en consola mensajes en un color rojo. Un miedo muy habitual cuando se empieza a programar es pensar que si haces algo mal o aparece alg√∫n mensaje de error, el ordenador puede explotar en cualquier momento. A programar se aprende programando, as√≠ que haz las pruebas que quieras, lo peor que puede pasar es que necesites cerrar sesi√≥n en R Studio y abrirlo de nuevo, o en el peor de los casos, desintalarlo y volverlo a iinstalar. Dado que el \\(99.9\\%\\) de las veces tu c√≥digo tendr√° errores que deber√°s ir solventando, no est√° de m√°s conocer los tipos de mensajes que R puede sacarte por consola. Los mensajes de ERROR ir√°n precedidos de la frase ¬´Error in‚Ä¶¬ª, d√°ndote a veces incluso el tipo de error y la l√≠nea de c√≥digo en la que se ha producido. Veamos un ejemplo intentando sumar un n√∫mero a una cadena de texto. &quot;a&quot; + 1 ## Error in &quot;a&quot; + 1: argumento no-num√©rico para operador binario Los errores son aquellos fallos que seguramente impidan la ejecuci√≥n del c√≥digo. Un error muy habitual es intentar acceder a alguna funci√≥n de alg√∫n paquete que, o bien no tenemos instalado, o bien no hemos llamado haciendo uso del library(): est√°s intentando leerte un libro de tu biblioteca pero ni siquiera has ido a la tienda a ¬´comprarlo¬ª. Los mensajes de WARNING ir√°n precedidos de la frase ¬´Warning in‚Ä¶¬ª, y son los fallos m√°s delicados ya que son posibles errores o incoherencias que R detecta en tu c√≥digo pero que no van a hacer que tu c√≥digo deje de ejecutarse, aunque probablemente no lo haga como a ti te gustar√≠a. Un ejemplo es cuando tratamos de hacer la raiz cuadrada de un n√∫mero negativo. sqrt(-1) ## Warning in sqrt(-1): Se han producido NaNs ## [1] NaN ¬øHa ejecutado la orden? S√≠, pero te advierte de que el resultado de la operaci√≥n es un NaN, un valor que no existe (al menos dentro de los n√∫meros reales), un Not A Number (ver Secci√≥n ??). Los mensajes de CONTROL ser√°n aquellos que aparecer√°n por consola sin empezar por ¬´Error in‚Ä¶¬ª ni ¬´Warning:‚Ä¶¬ª. Dichos mensajes, que puedes incluir t√∫ mismo en tu c√≥digo con funciones como cat() para monitorizar la ejecuci√≥n de c√≥digos largos, no son errores ni problemas, son simplemente informaci√≥n que R considera √∫til aportarte. "],["glosario-2.html", "4.4 Glosario", " 4.4 Glosario GLOSARIO Paquete: trozos de c√≥digo realizadas por otros usuarios de la comunidad (y validades por el equipo de CRAN si la descarga es mediante install.packages()) para ser usados. Una vez instalados (descargados) los trozos de c√≥digo a nuestro ordenador, basta con ¬´acudir¬ª a ellos con library(). Haciendo una met√°fora con la colecci√≥n de libros que tengas en casa: con la instalaci√≥n hemos comprado el libro y lo tenemos en nuestra estanter√≠a (para siempre), con la llamada al paquete, por ejemplo library(ggplot2), lo que hacemos es decidir, de entre todos los libros de la estanter√≠a, cuales queremos llevarnos de viaje (en cada maleta que hagamos). Los paquetes usados los ver√°s denotados como {nombre_paquete} a lo largo del manual. "],["consejos-1.html", "4.5 Consejos", " 4.5 Consejos CONSEJOS Panel de ayuda Si escribes en la consola ? nombre_funcion (por ejemplo, escribe en la consola ? sqrt), en el panel inferior derecho te aparecer√° una documentaci√≥n de ayuda de la funci√≥n para saber que argumentos necesita, como puedes usar la funci√≥n, qu√© es lo que te devuelve, ejemplos de uso, etc. ? sqrt Imagen/gr√°fica 4.5: Panel de ayuda. ¬øC√≥mo comentar el c√≥digo? Probablemente lo m√°s importante al programar es que te acostumbres a comentar lo m√°ximo posible tu c√≥digo. ¬øQu√© es un comentario? Es un texto que escribes entre el c√≥digo precedido de #: todo lo que venga detr√°s no ser√° interpretado por R como c√≥digo. Es vital cuando programamos que nos acostumbremos a comentar lo que hacemos, tanto para nosotros como para otras personas que puedan leer nuestro c√≥digo. √çndice en el c√≥digo Puedes escribir comentarios en el c√≥digo para que autom√°ticamente se organice tu c√≥digo en ep√≠grafes, mostr√°ndote un √≠ndice en el panel lateral (haz click en el icono de la esquina superior derecha del editor) y permitiendo minimizar partes del c√≥digo. Para ello puedes comentar por ejemplo con # ----- t√≠tulo -----. Imagen/gr√°fica 4.6: Comentando el c√≥digo para generar un √≠ndice. "],["ejercicios.html", "4.6 üìù Ejercicios", " 4.6 üìù Ejercicios (haz click en las flechas para ver soluciones) üìùEjercicio 1: en tu consola (parte inferior de tu pantalla), asigna los valores 2 y 5 a dos variables a y b. Tras asignarles valores, multiplica los n√∫meros en consola (haz click en la flecha para la soluci√≥n propuesta). Soluci√≥n: # Para poner comentarios en el c√≥digo se usa # # Definici√≥n de variables a &lt;- 2 b &lt;- 5 # Multiplicaci√≥n a * b ## [1] 10 Imagen/gr√°fica 4.7: Multiplicaci√≥n de a y b. üìùEjercicio 2: repite el ejercicio anterior pero ahora guarda el resultado de la multiplicaci√≥n en una variable c. Para ver el resultado guardado en c escribe dicha variable en consola (haz click en la flecha para la soluci√≥n propuesta). Soluci√≥n: # Variables a &lt;- 2 b &lt;- 5 # Resultado c &lt;- a * b # Muestro en consola c ## [1] 10 Imagen/gr√°fica 4.8: Multiplicaci√≥n de a y b guardando el resultado. üìùEjercicio 3: asigna ahora los valores 1, -2, 3 a tres variables a, b y c, y calcula la ra√≠z cuadrada de cada uno. Soluci√≥n: # Variables a &lt;- 1 b &lt;- -2 c &lt;- 3 # Resultado sqrt(a) ## [1] 1 sqrt(b) ## [1] NaN sqrt(c) ## [1] 1.732051 üìùEjercicio 4: repite el ejercicio 2 pero ahora escribe el c√≥digo en un script (fichero .R, guardado en script01.R). Recuerda al acabar seleccionar las l√≠neas a ejecutar y clickar Run, o bien guardar el script con Source on save activado (haz click en la flecha para la soluci√≥n propuesta). Soluci√≥n: Imagen/gr√°fica 4.9: Multiplicaci√≥n de a y b guardando el resultado pero escribiendo en el script. üìùEjercicio 5: calcula en consola la suma de 3 m√°s 4, y todo ello multiplicado por 10, y as√≠gnalo a una variable x (haz click en la flecha para la soluci√≥n propuesta). Soluci√≥n: x &lt;- (3 + 4) * 10 üìùEjercicio 6: asigna un valor positivo a x y calcula su ra√≠z cuadrada; asigna otro negativo y calcula su valor absoluto (haz click en la flecha para la soluci√≥n propuesta). Soluci√≥n: # Ra√≠z cuadrada x &lt;- 73 sqrt(x) ## [1] 8.544004 # Valor absoluto y &lt;- -73 abs(y) ## [1] 73 CONSEJO: Las √≥rdenes sqrt(x) y abs(y) se llaman funciones, y la variable que tienen entre par√©ntesis se llama argumento de la funci√≥n: una variable que toma de entrada la funci√≥n y con la que opera internamente. üìùEjercicio 7: usando la variable x ya definida, calcula x - 5 y gu√°rdalo en una nueva variable z (haz click en la flecha para la soluci√≥n propuesta). Soluci√≥n: z &lt;- x - 5 z ## [1] 68 üìùEjercicio 8: usando las variables x y z ya definidas, calcula la ra√≠z cuadrada del m√°ximo entre ambas, y gu√°rdalo en una nueva variable t. Hazlo en un script en lugar de en consola (haz click en la flecha para la soluci√≥n propuesta). Soluci√≥n: t &lt;- sqrt(max(x, z)) t ## [1] 8.544004 WARNING: No hace falta gastar una l√≠nea por cada orden que quieras ejecutar. Tampoco necesitas guardar cada paso intermedio que realices. Cuidado con la memoria: cada asignaci√≥n que hagas es una variable guardada que consume recursos en tu ordenador. "],["tipos-datos.html", "Cap√≠tulo 5 Tipos de datos", " Cap√≠tulo 5 Tipos de datos Scripts usados: script02.R: tipos de datos y funciones usadas con ellos. Ver en https://github.com/dadosdelaplace/courses-ECI-2022/blob/main/scripts/script02.R Tras las lecciones anteriores, los ejercicios planteados y lo que hayas jugueteado por tu cuenta, deber√≠amos saber usar ya R como una calculadora. Vamos a ir m√°s all√°: ¬øexisten datos m√°s all√° de los n√∫meros? En este cap√≠tulo vamos a empezar a familiarizarnos con los tipos de datos (individuales) que podemos necesitar. Piensa por ejemplo en los datos guardados de una persona: La edad ser√° un n√∫mero (sin decimales) Su peso o estatura ser√° otro n√∫mero (ahora con decimales). Su nombre ser√° una cadena de texto. Su fecha de nacimiento ser√° precisamente eso, una fecha. A la pregunta ¬´¬øest√° usted soltero/a?¬ª la respuesta ser√° lo que llamamos una variable binaria: una variable que solo puede valer TRUE (si est√° soltero/a) y FALSE (en otro caso). Existen m√°s tipos (como n√∫meros complejos) pero con estos nos valdr√° para nuestra introducci√≥n. "],["numericas.html", "5.1 Variables num√©ricas", " 5.1 Variables num√©ricas [X] Variables num√©ricas (individuales) [ ] Variables de caracteres [ ] Variables l√≥gicas [ ] Variables de tipo fecha Probablemente el dato m√°s sencillo y obvio de entender sean los datos num√©ricos, datos que ya hemos usado en nuestros primeros pasos como calculadora. a &lt;- 1 b &lt;- 2 a + b ## [1] 3 En el c√≥digo anterior, tanto a como b como la suma a + b son de tipo num√©rico, algo que podemos comprobar con la funci√≥n class() (nos devuelve numeric). # Clase de las variables class(a) ## [1] &quot;numeric&quot; class(b) ## [1] &quot;numeric&quot; class(a + b) ## [1] &quot;numeric&quot; Tambi√©n podemos comprobar su naturaleza con typeof(), que nos devuelve la naturaleza del dato tal cual es guardada en R. # Topolog√≠a interna typeof(a) ## [1] &quot;double&quot; typeof(b) ## [1] &quot;double&quot; typeof(a + b) ## [1] &quot;double&quot; F√≠jate que ambas √≥rdenes combinadas nos dicen que las variables son de tipo num√©rico pero concretamente de tipo double: dichas variables son entendidas internamente como n√∫meros con decimales (aunque no los veamos), lo que en matem√°ticas se llaman n√∫meros reales (por curiosidad: el t√©rmino double viene de lenguajes de programaci√≥n antiguos como C, que significa ¬´doble precisi√≥n¬ª, para indicarle que reserve 8 bytes - 64 bits - de memoria). Durante el curso no distinguiremos entre distintos tipos de n√∫meros, para nosotros ser√°n siempre de clase numeric y de tipo double, pero podr√≠amos definir n√∫meros enteros o integer (sin decimales, ahorrando huecos en memoria). # Dato num√©rico (entero) a &lt;- 1L class(a) ## [1] &quot;integer&quot; typeof(a) ## [1] &quot;integer&quot; Con los datos num√©ricos podemos realizar todas las operaciones que se nos ocurrir√≠a hacer en una calculadora, como sumar (+), restar (-), multiplicar (*), dividir (/), ra√≠z cuadrada (sqrt()), valor absoluto (abs()), elevar al cuadrado (^2), elevar al cubo (^3), etc. # Definimos dos variables num√©ricas a &lt;- 1 b &lt;- -2 # Suma y resta a + b ## [1] -1 a - b ## [1] 3 # Multiplicaci√≥n y divisi√≥n a * b ## [1] -2 a / b ## [1] -0.5 # Ra√≠z cuadrada sqrt(a) ## [1] 1 # Valor absoluto abs(b) ## [1] 2 # Potencias a^2 ## [1] 1 b^3 ## [1] -8 "],["caracter.html", "5.2 Variables de tipo caracter (texto)", " 5.2 Variables de tipo caracter (texto) [X] Variables num√©ricas (individuales) [X] Variables de caracteres [ ] Variables l√≥gicas [ ] Variables de tipo fecha Pero no solo de n√∫meros viven los datos: imagina que adem√°s de la edad de una persona queremos guardar su nombre. edad &lt;- 32 nombre &lt;- &quot;Javier&quot; class(edad) ## [1] &quot;numeric&quot; typeof(edad) ## [1] &quot;double&quot; class(nombre) ## [1] &quot;character&quot; typeof(nombre) ## [1] &quot;character&quot; F√≠jate que ahora tenemos en nombre una variable de tipo character, es decir, una cadena de texto (conocido en otros lenguajes como string o char): letras y caracteres entre comillas. 5.2.1 Nuestra primera funci√≥n: paste/paste0 Las cadenas de texto son un tipo especial de dato, con los que obviamente no podremos hacer operaciones aritm√©ticas, pero si podemos hacer operaciones propias de cadenas de texto como puede ser la funci√≥n paste(). Dicha funci√≥n nos permite pegar dos cadenas de caracteres, decidiendo que caracter queremos que vaya entre palabra con el argumento sep =. nombre &lt;- &quot;Javier&quot; apellido &lt;- &quot;√Ålvarez&quot; paste(nombre, apellido, sep = &quot;&quot;) # todo junto ## [1] &quot;Javier√Ålvarez&quot; paste(nombre, apellido, sep = &quot; &quot;) # separados por un espacio ## [1] &quot;Javier √Ålvarez&quot; paste(nombre, apellido, sep = &quot;.&quot;) # separados por un punto . ## [1] &quot;Javier.√Ålvarez&quot; Si queremos pegar cadenas de texto sin ning√∫n tipo de caracter, existe una forma m√°s abreviada y limpia de ejecutar la orden, usando la funci√≥n paste0() # Son equivalentes paste(nombre, apellido, sep = &quot;&quot;) # todo junto ## [1] &quot;Javier√Ålvarez&quot; paste0(nombre, apellido) # todo junto sin nada separando ## [1] &quot;Javier√Ålvarez&quot; Cuando hemos ejecutado paste() estamos ejecutando lo que se conoce como una funci√≥n: una palabra reservada que representa un conjunto de √≥rdenes, y que se ejecuta a partir de unos argumentos de entrada. En el caso de la funci√≥n paste() puede tener varios argumentos: las cadenas de texto que queremos copiar, y un argumento opcional llamado sep, que podemos darle un valor con concreto o dejarlo sin especificar. Lo que har√° R ser√° tomar su valor por defecto igual a sep = &quot; &quot; (por defecto, la funci√≥n paste() pega cadenas de texto con un espacio entre ellas). Prueba a ejecutar ? paste en consola para ver las opciones en el panel de ayuda. # Son equivalentes paste(nombre, apellido, sep = &quot; &quot;) ## [1] &quot;Javier √Ålvarez&quot; paste(nombre, apellido) ## [1] &quot;Javier √Ålvarez&quot; 5.2.2 Nuestro primer paquete: glue Otra forma m√°s intuitiva de trabajar con textos y variables num√©ricas es usar el paquete {glue}, que nos permite pegar cadenas de texto a variables num√©ricas de forma simb√≥lica. install.packages(&quot;glue&quot;) # solo la primera vez library(glue) Recuerda que install.packages() es solo necesario la primera que ¬´compramos el libro¬ª: nos bajamos una serie de archivos a nuestro ordenador. Una vez que hemos comprado el libro, cada vez que queramos usarlo bastar√° con indicarle que nos traiga ese libro concreto con library(). El paquete {glue} nos permite pegar de una forma mucho m√°s legible cadenas de texto # Ejemplo 1 edad &lt;- 32 glue(&quot;La edad es de {edad} a√±os&quot;) ## La edad es de 32 a√±os paste(&quot;La edad es de&quot;, edad, &quot;a√±os&quot;) # equivalente ## [1] &quot;La edad es de 32 a√±os&quot; # Ejemplo 2 edad &lt;- 32 unidades &lt;- &quot;a√±os&quot; glue(&quot;La edad es de {edad} {unidades}&quot;) ## La edad es de 32 a√±os Tambi√©n podemos hacer uso de dicha funci√≥n sin tener los valores num√©ricos previamente guardados en variables. # Otra forma sin definir variables a priori glue(&quot;La edad es de {32} a√±os&quot;) ## La edad es de 32 a√±os "],["logicas.html", "5.3 Variables l√≥gicas (TRUE/FALSE)", " 5.3 Variables l√≥gicas (TRUE/FALSE) [X] Variables num√©ricas (individuales) [X] Variables de caracteres [X] Variables l√≥gicas [ ] Variables de tipo fecha Probablemente el tipo de datos m√°s importante en todo lenguaje de programaci√≥n son las variables l√≥gicas. Un valor l√≥gico puede tomar dos valores (en realidad pueden tomar un tercer valor, NA, las siglas de not available para representar datos ausentes, pero lo veremos m√°s adelante): TRUE (guardado internamente como un 1). FALSE (guardado internamente como un 0). Este tipo de variables, tambi√©n conocidas como variables binarias (solo dos valores) o booleanas, son la base de la programaci√≥n ya que cada bit de nuestro ordenador puede guardar un 1 o un 0. soltero &lt;- TRUE # ¬øEs soltero? --&gt; S√ç carnet_conducir &lt;- FALSE # ¬øTiene carnet de conducir? --&gt; NO class(soltero) ## [1] &quot;logical&quot; typeof(soltero) ## [1] &quot;logical&quot; class(carnet_conducir) ## [1] &quot;logical&quot; typeof(carnet_conducir) ## [1] &quot;logical&quot; Ahora nuestas variables son guardadas como logical, y pueden tomar los valores TRUE/FALSE, aunque internamente son guardados como 1/0. Es importante entender que no son variables de texto: &quot;TRUE&quot; es un texto (internamente id√©ntico a rojo o azul) TRUE es una variable l√≥gica # Texto texto &lt;- &quot;TRUE&quot; texto + 1 ## Error in texto + 1: argumento no-num√©rico para operador binario # L√≥gica logica &lt;- TRUE logica + 1 ## [1] 2 Estos valores suelen ser resultado de evaluar condiciones l√≥gicas. Por ejemplo, imaginemos que queremos comprobar si una persona est√° soltero o no, y si tiene carnet de conducir o no. Basta con que ejecutemos la orden soltero == TRUE, que nos devolver√° TRUE si est√° soltero, y FALSE en caso contrario. De igual manera podremos hacer carnet_conducir == TRUE. IMPORTANTE: cuando queremos comparar si un elemento es igual a otro, usaremos el operador de comparaci√≥n ==, pudiendo usar tambi√©n su opuesto != (¬´distinto de¬ª). soltero == TRUE ## [1] TRUE soltero != TRUE # igual que soltero == FALSE ## [1] FALSE carnet_conducir == TRUE ## [1] FALSE carnet_conducir != TRUE ## [1] TRUE Por el mismo razonamiento podemos comparar si una variable num√©rica o de tipo caracter es igual o distinto a un valor dado, incluso para las num√©ricas podemos comparar si son menores o mayores que un n√∫mero. ¬øTiene la persona menos de 32 a√±os? ¬øTiene justo 32 a√±os? ¬øTiene 32 a√±os o m√°s? edad &lt; 32 ## [1] FALSE edad == 32 ## [1] TRUE edad &gt;= 32 ## [1] TRUE ¬øLa persona se llama Carlos? nombre == &quot;Carlos&quot; ## [1] FALSE F√≠jate que para comparaciones tenemos ¬´igual a¬ª == frente distinto !=, pero tambi√©n comparaciones de orden como &lt;=, &gt; o &gt;=. Las condiciones l√≥gicas pueden ser combinadas, principalmente de dos maneras: Intersecci√≥n: todas las condiciones concatenadas se deben cumplir (conjunci√≥n y, operador &amp;) para devolver un TRUE. Uni√≥n: basta con que una de las condiciones concatenadas se cumpla (conjunci√≥n o, operador |) para devolver un TRUE. Por ejemplo, podr√≠amos preguntarnos si la persona tiene m√°s de 32 a√±os y est√° soltero (AMBAS deben cumplirse). edad &gt; 32 &amp; soltero == TRUE ## [1] FALSE # Equivalente (al ser soltero un valor ya de por si l√≥gico) edad &gt; 32 &amp; soltero ## [1] FALSE Vemos que el resultado es FALSE ya que solo se cumple una de las condiciones: devolver√≠a TRUE si preguntamos si tiene m√°s de 30 a√±os y est√° soltero, o si solo pedimos una de las dos condiciones (¬øest√° soltero y/o tiene m√°s de 32 a√±os?). edad &gt; 32 | soltero # nos sirve con que alguna se cumpla ## [1] TRUE edad &gt; 32 &amp; soltero # deben cumplirse ambas ## [1] FALSE edad &gt; 30 &amp; soltero # deben cumplirse ambas ## [1] TRUE "],["fechas.html", "5.4 Variables de tipo fecha", " 5.4 Variables de tipo fecha [X] Variables num√©ricas (individuales) [X] Variables de caracteres [X] Variables l√≥gicas [X] Variables de tipo fecha Por √∫ltimo, vamos a ver un tipo de datos muy especial: los datos de tipo fecha. Una fecha podr√≠a ser a priori una simple cadena de texto &quot;2021-04-21&quot; pero podemos usar la funci√≥n as.Date() para que R entienda que esa cadena de texto representa un instante temporal. F√≠jate la diferencia entre una fecha en texto y una fecha con as.Date(). # Cadena de texto fecha_char &lt;- &quot;2021-04-21&quot; fecha_char + 1 ## Error in fecha_char + 1: argumento no-num√©rico para operador binario # Fecha, mostrada como un texto pero guardada internamente como un n√∫mero fecha_date &lt;- as.Date(fecha_char, format = &quot;%Y-%m-%d&quot;) fecha_date + 1 ## [1] &quot;2021-04-22&quot; En el momento en que convertimos la cadena de texto a fecha, aunque se visualice como un texto, internamente es un n√∫mero, por lo que podemos restar fechas (d√≠as entre ambas), podemos sumar n√∫meros a fechas (fecha d√≠as despu√©s), etc. Como ya hemos dicho, las fechas y momentos temporales no ser√°n meras cadenas de caracter sino que tienen clases especiales asociadas. Las fechas ser√°n guardadas internamente como el n√∫mero de d√≠as transcurridos desde el 1 de enero de 1970, y las horas como n√∫mero de segundos desde el 1 de enero de 1970 (para la clase POSIXct) o una lista de segundos, minutos y horas (para la clase POSIXlt). ¬øC√≥mo obtener autom√°ticamente la fecha de hoy? La funci√≥n Sys.Date() nos devuelve directamente la fecha y hora en el momento de la ejecuci√≥n de la orden. fecha &lt;- Sys.Date() fecha ## [1] &quot;2021-12-27&quot; fecha - 7 # una semana antes ## [1] &quot;2021-12-20&quot; class(fecha) # de clase fecha ## [1] &quot;Date&quot; Para convertir una cadena de texto a fecha, basta usar la funci√≥n as.Date(), pas√°ndole como argumento la fecha en formato &quot;yyyy-mm-dd&quot; por defecto. as.Date(&quot;2021-03-10&quot;) # formato por defecto ## [1] &quot;2021-03-10&quot; Si introducimos otro tipo de formato, debemos especific√°rselo en un segundo argumento, para R sepa el formato de fecha que le estamos pasando as.Date(&quot;10-03-2020&quot;, &quot;%d-%m-%Y&quot;) # con d√≠a-mes-a√±o (4 cifras) ## [1] &quot;2020-03-10&quot; as.Date(&quot;10-03-20&quot;, &quot;%d-%m-%y&quot;) # con d√≠a-mes-a√±o (2 cifras) ## [1] &quot;2020-03-10&quot; as.Date(&quot;03-10-2020&quot;, &quot;%m-%d-%Y&quot;) # con mes-d√≠a-a√±o (4 cifras) ## [1] &quot;2020-03-10&quot; as.Date(&quot;Octubre 21, 1995 21:24&quot;, &quot;%B %d, %Y %H:%M&quot;) # fecha escrita ## [1] NA ERROR: sin pasar a fecha no se puede operar Si tenemos una fecha como caracter, nunca podremos hacer operaciones (por ejemplo, restarle una unidad temporal, en este caso un d√≠a). &quot;2021-03-10&quot; - 1 # error ## Error in &quot;2021-03-10&quot; - 1: argumento no-num√©rico para operador binario F√≠jate la diferencia cuando lo convertimos en fecha fecha &lt;- as.Date(&quot;2021-03-10&quot;) - 1 # d√≠a previo fecha ## [1] &quot;2021-03-09&quot; Dentro del entorno del paquete {lubridate} tenemos bastantes funciones √∫tiles para trabajar con fechas como las siguientes install.packages(&quot;lubridate&quot;) # solo la primera vez library(lubridate) ymd_hms(&quot;2017-11-28T14:02:00&quot;) # convertir a fecha una cadena a√±o-mes-d√≠a + hora ## [1] &quot;2017-11-28 14:02:00 UTC&quot; ydm_hms(&quot;2017-22-12 10:00:00&quot;) # convertir a fecha una cadena a√±o-d√≠a-mes + hora ## [1] &quot;2017-12-22 10:00:00 UTC&quot; dmy_hms(&quot;1 Jan 2017 23:59:59&quot;) # convertir a fecha una cadena textual de fecha + hora ## [1] &quot;2017-01-01 23:59:59 UTC&quot; mdy(&quot;July 4th, 2000&quot;) # convertir a fecha una cadena textual de fecha ## [1] &quot;2000-07-04&quot; ymd(20170131) ## [1] &quot;2017-01-31&quot; Adem√°s el paquete nos proporciona herramientas para extraer la fecha y hora actuales con las funciones today() y now() today() ## [1] &quot;2021-12-27&quot; now() ## [1] &quot;2021-12-27 00:30:28 CET&quot; Tambi√©n tenemos disponibles en dicho paquete funciones para extraer facilmente algunas variables temporales como el d√≠a de la semana, el mes o el cuatrimestre, con las funciones year(), months(), day() o wday() (d√≠a de la semana). fecha &lt;- now() year(fecha) ## [1] 2021 month(fecha) ## [1] 12 day(fecha) ## [1] 27 wday(fecha, week_start = 1) # D√≠a de la semana (empezando por el lunes) ## [1] 1 hour(fecha) ## [1] 0 minute(fecha) ## [1] 30 second(fecha) ## [1] 28.55104 week(fecha) # N√∫mero de semana (del a√±o) ## [1] 52 Al igual que podemos realizar operaciones aritm√©ticas sencillas con las fechas, tambi√©n podemos realizar comparaciones, por ejemplo, si el d√≠a actual es menor o mayor que otra fecha dada. fecha_actual &lt;- now() fecha_actual &gt; ymd(20170131) # Actual vs 2017-01-31 ## [1] TRUE fecha_actual &gt; ymd(21000131) # Actual vs 2100-01-31 ## [1] FALSE "],["consejos-2.html", "5.5 Consejos", " 5.5 Consejos CONSEJOS Recuperar un comando y autocompletar Si haces click con el rat√≥n en la consola y pulsas la flecha ¬´arriba¬ª del teclado, te ir√° apareciendo todo el historial de √≥rdenes ejecutadas. Es una manera de ahorrar tiempo para ejecutar √≥rdenes similares a las ya ejecutadas. Si empiezas a escribir el nombre de una variable pero no te acuerdas exactamente de su nombre, pulsando tabulador te autocompletar√° solo. Convertir tipos de datos A veces la lectura de variables num√©ricas de nuestros archivos puede hacer que un n√∫mero, por ejemplo 1, sea le√≠do como la cadena de texto &quot;1&quot;, con la que no podemos operar como un n√∫mero. Las funciones as.numeric(), as.character() y as.logical() nos permiten convertir una variable en tipo num√©rico, caracter o l√≥gico, respectivamente. &quot;1&quot; + 1 ## Error in &quot;1&quot; + 1: argumento no-num√©rico para operador binario as.numeric(&quot;1&quot;) + 1 ## [1] 2 as.character(1) ## [1] &quot;1&quot; as.logical(c(0, 1)) ## [1] FALSE TRUE "],["ejercicios-1.html", "5.6 üìù Ejercicios", " 5.6 üìù Ejercicios (haz click en las flechas para ver soluciones) üìùEjercicio 1: define una variable que guarde tu edad, otra con tu nombre, otra respondiendo a la pregunta ¬´¬øtengo hermanos?¬ª y otra con la fecha de tu nacimiento. Soluci√≥n: edad &lt;- 32 # tipo numeric nombre &lt;- &quot;Javier&quot; # tipo caracter hermanos &lt;- TRUE # tipo hermanos fecha_nacimiento &lt;- as.Date(&quot;1989-09-10&quot;) # tipo fecha üìùEjercicio 2: define otra variable con tus apellidos y junta las variables nombre y apellidos en una sola variable nombre_completo. Soluci√≥n: # Apellidos apellidos &lt;- &quot;√Ålvarez Li√©bana&quot; # Pegamos nombre_completo &lt;- glue(&quot;{nombre} {apellidos}&quot;) nombre_completo ## Javier √Ålvarez Li√©bana # Otra forma nombre_completo &lt;- paste(nombre, apellidos) nombre_completo ## [1] &quot;Javier √Ålvarez Li√©bana&quot; üìùEjercicio 3: construye una frase que diga ¬´Hola, me llamo ‚Ä¶ y tengo ‚Ä¶ a√±os. Nac√≠ el ‚Ä¶ de ‚Ä¶ de ‚Ä¶¬ª (con el nombre completo). Soluci√≥n: dia_nacimiento &lt;- day(fecha_nacimiento) mes_nacimiento &lt;- month(fecha_nacimiento) a_nacimiento &lt;- year(fecha_nacimiento) glue(&quot;Hola, me llamo {nombre_completo} y tengo {edad} a√±os. Nac√≠ el {dia_nacimiento} del {mes_nacimiento} de {a_nacimiento}&quot;) ## Hola, me llamo Javier √Ålvarez Li√©bana y tengo 32 a√±os. Nac√≠ el 10 del 9 de 1989 üìùEjercicio 4: calcula los d√≠as que han pasado desde la fecha de tu nacimiento Soluci√≥n: days(today() - fecha_nacimiento) ## [1] &quot;11796d 0H 0M 0S&quot; üìùEjercicio 5: obt√©n una variable l√≥gica que nos diga si se cumplen (todas) las condiciones i) menor de 30 a√±os; ii) con hermanos; iii) nacido en 1990 o posterior. Soluci√≥n: # Se tienen que cumplir todas edad &lt; 30 &amp; fecha_nacimiento &gt;= as.Date(&quot;1990-01-01&quot;) &amp; hermanos ## [1] FALSE üìùEjercicio 6: obt√©n una variable l√≥gica que nos diga si se cumplen (al menos) alguna de las condiciones i) menor de 30 a√±os; ii) con hermanos; iii) nacido en 1990 o posterior. Soluci√≥n: # Se tienen que cumplir todas edad &lt; 30 | fecha_nacimiento &gt;= as.Date(&quot;1990-01-01&quot;) | hermanos ## [1] TRUE üìùEjercicio 7: calcula la fecha 11 d√≠as m√°s tarde a tu fecha de nacimiento. Obt√©n la semana del a√±o de dicha fecha y el d√≠a de la semana. Soluci√≥n: # Podemos sumar porque es fecha fecha_post &lt;- fecha_nacimiento + 11 fecha_post ## [1] &quot;1989-09-21&quot; # Semana del a√±o week(fecha_post) ## [1] 38 # D√≠a de la semana (versi√≥n americana, empiezan el domingo) wday(fecha_post) ## [1] 5 # D√≠a de la semana (versi√≥n espa√±ola) wday(fecha_post, week_start = 1) ## [1] 4 # D√≠a de la semana en texto weekdays(fecha_post) ## [1] &quot;Thursday&quot; üìùEjercicio 8: define dos n√∫meros cualesquiera en variable a y b. Calcula su suma y determina cual es mayor. Soluci√≥n: a &lt;- -5 b &lt;- 7 # Suma c &lt;- a + b c ## [1] 2 # Comparaciones a == b # ¬øa = b? ## [1] FALSE a &lt; b # ¬øa &lt; b? ## [1] TRUE "],["bibliograf√≠a.html", "Bibliograf√≠a", " Bibliograf√≠a "],["404.html", "Page not found", " Page not found The page you requested cannot be found (perhaps it was moved or renamed). You may want to try searching to find the page's new location, or use the table of contents to find the page you are looking for. "]]
