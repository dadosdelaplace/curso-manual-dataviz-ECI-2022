<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Cap√≠tulo 17 Sacando datos de las piedras | Analizando datos, visualizando informaci√≥n, contando historias</title>
<meta name="author" content="Javier √Ålvarez Li√©bana y Gabriel Valverde Castilla">
<meta name="description" content="Scripts usados: script17.R: importar/exportar datos. Ver en https://github.com/dadosdelaplace/courses-ECI-2022/blob/main/scripts/script17.R  Hemos aprendido a crear nuestros propios datos pero...">
<meta name="generator" content="bookdown 0.24 with bs4_book()">
<meta property="og:title" content="Cap√≠tulo 17 Sacando datos de las piedras | Analizando datos, visualizando informaci√≥n, contando historias">
<meta property="og:type" content="book">
<meta property="og:image" content="/img/logo_R.png">
<meta property="og:description" content="Scripts usados: script17.R: importar/exportar datos. Ver en https://github.com/dadosdelaplace/courses-ECI-2022/blob/main/scripts/script17.R  Hemos aprendido a crear nuestros propios datos pero...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Cap√≠tulo 17 Sacando datos de las piedras | Analizando datos, visualizando informaci√≥n, contando historias">
<meta name="twitter:description" content="Scripts usados: script17.R: importar/exportar datos. Ver en https://github.com/dadosdelaplace/courses-ECI-2022/blob/main/scripts/script17.R  Hemos aprendido a crear nuestros propios datos pero...">
<meta name="twitter:image" content="/img/logo_R.png">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><link href="libs/_Sen-0.4.0/font.css" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=DM%20Mono&amp;display=swap" rel="stylesheet">
<link href="libs/_Bitter-0.4.0/font.css" rel="stylesheet">
<script src="libs/bs3compat-0.3.0/transition.js"></script><script src="libs/bs3compat-0.3.0/tabs.js"></script><script src="libs/bs3compat-0.3.0/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="libs/htmlwidgets-1.5.3/htmlwidgets.js"></script><link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet">
<script src="libs/datatables-binding-0.18/datatables.js"></script><link href="libs/dt-core-1.10.20/css/jquery.dataTables.min.css" rel="stylesheet">
<link href="libs/dt-core-1.10.20/css/jquery.dataTables.extra.css" rel="stylesheet">
<script src="libs/dt-core-1.10.20/js/jquery.dataTables.min.js"></script><link href="libs/crosstalk-1.1.1/css/crosstalk.css" rel="stylesheet">
<script src="libs/crosstalk-1.1.1/js/crosstalk.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><link rel="stylesheet" href="css/style.css">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">Analizando datos, visualizando informaci√≥n, contando historias</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html">Prefacio</a></li>
<li class="book-part">Recursos</li>
<li><a class="" href="ejercicios-recopilados.html">üìù Ejercicios recopilados</a></li>
<li><a class="" href="recursos-de-aprendizaje.html">üìö Recursos de aprendizaje</a></li>
<li><a class="" href="pr%C3%A1cticas-evaluables.html">üèÖ Pr√°cticas evaluables</a></li>
<li class="book-part">Toma de contacto</li>
<li><a class="" href="requisitos.html"><span class="header-section-number">1</span> Requisitos</a></li>
<li><a class="" href="instalacion.html"><span class="header-section-number">2</span> Instalaci√≥n</a></li>
<li><a class="" href="que-es-R.html"><span class="header-section-number">3</span> ¬øQu√© es R?</a></li>
<li><a class="" href="primeros-pasos.html"><span class="header-section-number">4</span> Primeros pasos</a></li>
<li class="book-part">Conceptos b√°sicos</li>
<li><a class="" href="tipos-datos.html"><span class="header-section-number">5</span> Tipos de datos</a></li>
<li><a class="" href="vectores.html"><span class="header-section-number">6</span> Vectores</a></li>
<li><a class="" href="operacionesvectores.html"><span class="header-section-number">7</span> Operaciones con vectores</a></li>
<li><a class="" href="datos.html"><span class="header-section-number">8</span> Datos estructurados</a></li>
<li><a class="" href="repaso-1.html"><span class="header-section-number">9</span> Repaso: empezando a trastear con datos</a></li>
<li class="book-part">Haciendo el trabajo m√°s f√°cil</li>
<li><a class="" href="if-else.html"><span class="header-section-number">10</span> Estructuras de control: if-else</a></li>
<li><a class="" href="bucles.html"><span class="header-section-number">11</span> Estructuras de control: bucles</a></li>
<li><a class="" href="proyecto.html"><span class="header-section-number">12</span> Primer proyecto de trabajo</a></li>
<li><a class="" href="funciones.html"><span class="header-section-number">13</span> Funciones</a></li>
<li><a class="" href="listas.html"><span class="header-section-number">14</span> Listas</a></li>
<li class="book-part">Empezando a explorar datos</li>
<li><a class="" href="tibble.html"><span class="header-section-number">15</span> Mejorando los data.frame: datos tibble</a></li>
<li><a class="" href="tidy.html"><span class="header-section-number">16</span> Tidy vs messy data: daticos ordenados</a></li>
<li><a class="active" href="importar-exportar.html"><span class="header-section-number">17</span> Sacando datos de las piedras</a></li>
<li><a class="" href="rmarkdown.html"><span class="header-section-number">18</span> Contando los datos: rmarkdown</a></li>
<li class="book-part">Incursi√≥n a tidyverse</li>
<li><a class="" href="tidyverse.html"><span class="header-section-number">19</span> Depuraci√≥n y transformaci√≥n</a></li>
<li><a class="" href="tidyverse-2.html"><span class="header-section-number">20</span> Profundizando tidyverse: elecciones y Spotify</a></li>
<li><a class="" href="resumenes.html"><span class="header-section-number">21</span> Resumiendo y relacionado datos</a></li>
<li><a class="" href="ggplot2.html"><span class="header-section-number">22</span> Visualizando datos: incursi√≥n a ggplot2</a></li>
<li><a class="" href="bibliograf%C3%ADa.html">Bibliograf√≠a</a></li>
</ul>

        <div class="book-extra">
          <p><a id="book-repo" href="https://github.com/dadosdelaplace/courses-ECI-2022">View book source <i class="fab fa-github"></i></a></p>
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="importar-exportar" class="section level1">
<h1>
<span class="header-section-number">Cap√≠tulo 17</span> Sacando datos de las piedras<a class="anchor" aria-label="anchor" href="#importar-exportar"><i class="fas fa-link"></i></a>
</h1>
<div class="blackbox">
<p>Scripts usados:</p>
<ul>
<li>
<a href="https://github.com/dadosdelaplace/courses-ECI-2022/blob/main/scripts/script17.R"><strong>script17.R</strong></a>: importar/exportar datos. Ver en <a href="https://github.com/dadosdelaplace/courses-ECI-2022/blob/main/scripts/script17.R" class="uri">https://github.com/dadosdelaplace/courses-ECI-2022/blob/main/scripts/script17.R</a>
</li>
</ul>
</div>
<p>Hemos aprendido a <strong>crear nuestros propios datos</strong> pero muchas veces los cargaremos de distintos archivos y fuentes. Vamos a ver algunas <mark><strong>formas que tenemos para importar (cargar) datos</strong><mark> con casos pr√°cticos.</mark></mark></p>
<p>Es <strong>recomendable</strong> tener los datos en la <mark><strong>misma carpeta del proyecto</strong></mark> pero una carpeta separada, ya que podemos tener muchos archivos y as√≠ no mezclamos dichos ficheros con los c√≥digos que escirbamos. En la carpeta <a href="https://github.com/dadosdelaplace/courses-ECI-2022/blob/main/DATOS">DATOS</a> tienes los distintos conjuntos que utilizaremos. Debes <mark><strong>descargarte el .zip del repositorio</strong>, y una vez descargada, <mark><strong>mover la carpeta DATOS</strong></mark> a la carpeta de tu proyecto.</mark></p>
<p><a href="https://github.com/dadosdelaplace/courses-ECI-2022" target="_blank"><img src="img/zip_repo.jpg" width="70%" style="display: block; margin: auto;"></a></p>
<div id="pasajeros-del-rms-titanic-archivo-.rdata" class="section level2">
<h2>
<span class="header-section-number">17.1</span> Pasajeros del RMS Titanic (archivo .RData)<a class="anchor" aria-label="anchor" href="#pasajeros-del-rms-titanic-archivo-.rdata"><i class="fas fa-link"></i></a>
</h2>
<blockquote>
<p>Fuente original de los datos: <a href="https://www.kaggle.com/c/titanic/overview" class="uri">https://www.kaggle.com/c/titanic/overview</a></p>
</blockquote>
<p>El 15 de abril de 1912 se produc√≠a el <mark><strong>hundimiento naval m√°s famoso de la historia: el hundimiento del barco RMS Titanic</strong></mark>. Tras chocar con un iceberg, y con un d√©ficit de botes salvavidas a bordo, murieron 1502 de los 2224 pasajeros (tripulaci√≥n incluida) que iban a bordo del nav√≠o.</p>
<p><mark><strong>¬øQu√© edad, sexo o cabina ocupabana los pasajeros que sobrevivieron y los que no sobrevivieron?</strong></mark> Dicho conjunto de datos nos va a servir para ilustrar la forma <strong>m√°s sencilla</strong> de guardar datos y variables en <code>R</code>, y que adem√°s ocupa menos espacio en nuestro disco duro: los archivos propios que tiene <code>R</code> con <mark><strong>extensiones <code>.rda</code> o <code>.RData</code></strong></mark>. De nuestra carpeta <code>DATOS</code> cargaremos el archivo <code>titanic.RData</code>, un archivo con extensi√≥n <code>.RData</code>, conteniendo los datos de los pasajeros del Titanic (nombre, t√≠tulo, cabina, si sobrevivi√≥ o no, edad, etc)</p>
<p><mark><strong>¬øC√≥mo cargar archivos <code>.RData</code>?</strong></mark></p>
<p>Muy sencillo: como son ficheros nativos de <code>R</code>, basta con usar la <mark><strong>funci√≥n de carga <code><a href="https://rdrr.io/r/base/load.html">load()</a></code></strong></mark>, y dentro de los par√©ntesis la ruta del archivo que queramos cargar.</p>
<div class="sourceCode" id="cb1454"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/load.html">load</a></span><span class="op">(</span><span class="st">"./DATOS/titanic.RData"</span><span class="op">)</span></code></pre></div>
<p>F√≠jate que, al <strong>fijar nuestro directorio de trabajo</strong>, no necesitamos toda la ruta, solo <code>./</code> (que nos arranca la ruta en la carpeta de nuestro proyecto) m√°s la ruta dentro de la carpeta del proyecto. Ahora en el panel de <strong>entorno de la parte superior derecha</strong> tendremos un <code>data.frame</code> que antes no ten√≠amos. Ya hemos visto que una funci√≥n muy √∫til es <code><a href="https://rdrr.io/r/utils/head.html">head()</a></code>, con argumento el nombre de un <code>data.frame</code>, que nos permite visualizar las primeras filas.</p>
<div class="sourceCode" id="cb1455"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">titanic</span><span class="op">)</span></code></pre></div>
<pre><code>##   PassengerId Survived Pclass
## 1           1        0      3
## 2           2        1      1
## 3           3        1      3
## 4           4        1      1
## 5           5        0      3
## 6           6        0      3
##                                                  Name    Sex Age SibSp Parch
## 1                             Braund, Mr. Owen Harris   male  22     1     0
## 2 Cumings, Mrs. John Bradley (Florence Briggs Thayer) female  38     1     0
## 3                              Heikkinen, Miss. Laina female  26     0     0
## 4        Futrelle, Mrs. Jacques Heath (Lily May Peel) female  35     1     0
## 5                            Allen, Mr. William Henry   male  35     0     0
## 6                                    Moran, Mr. James   male  NA     0     0
##             Ticket    Fare Cabin Embarked
## 1        A/5 21171  7.2500              S
## 2         PC 17599 71.2833   C85        C
## 3 STON/O2. 3101282  7.9250              S
## 4           113803 53.1000  C123        S
## 5           373450  8.0500              S
## 6           330877  8.4583              Q</code></pre>
<p>Dicho fichero hemos visto que podemos <strong>convertirlo a un formato m√°s √≥ptimo</strong> con <code><a href="https://rdrr.io/pkg/tibble/man/as_tibble.html">as_tibble()</a></code></p>
<div class="sourceCode" id="cb1457"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://tibble.tidyverse.org/">tibble</a></span><span class="op">)</span>
<span class="va">titanic</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/tibble/man/as_tibble.html">as_tibble</a></span><span class="op">(</span><span class="va">titanic</span><span class="op">)</span>
<span class="va">titanic</span></code></pre></div>
<pre><code>## # A tibble: 891 √ó 12
##    PassengerId Survived Pclass Name   Sex     Age SibSp Parch Ticket  Fare Cabin
##          &lt;int&gt;    &lt;int&gt;  &lt;int&gt; &lt;fct&gt;  &lt;fct&gt; &lt;dbl&gt; &lt;int&gt; &lt;int&gt; &lt;fct&gt;  &lt;dbl&gt; &lt;fct&gt;
##  1           1        0      3 Braun‚Ä¶ male     22     1     0 A/5 2‚Ä¶  7.25 ""   
##  2           2        1      1 Cumin‚Ä¶ fema‚Ä¶    38     1     0 PC 17‚Ä¶ 71.3  "C85"
##  3           3        1      3 Heikk‚Ä¶ fema‚Ä¶    26     0     0 STON/‚Ä¶  7.92 ""   
##  4           4        1      1 Futre‚Ä¶ fema‚Ä¶    35     1     0 113803 53.1  "C12‚Ä¶
##  5           5        0      3 Allen‚Ä¶ male     35     0     0 373450  8.05 ""   
##  6           6        0      3 Moran‚Ä¶ male     NA     0     0 330877  8.46 ""   
##  7           7        0      1 McCar‚Ä¶ male     54     0     0 17463  51.9  "E46"
##  8           8        0      3 Palss‚Ä¶ male      2     3     1 349909 21.1  ""   
##  9           9        1      3 Johns‚Ä¶ fema‚Ä¶    27     0     2 347742 11.1  ""   
## 10          10        1      2 Nasse‚Ä¶ fema‚Ä¶    14     1     0 237736 30.1  ""   
## # ‚Ä¶ with 881 more rows, and 1 more variable: Embarked &lt;fct&gt;</code></pre>
<p>Y con <code><a href="https://rdrr.io/pkg/pillar/man/glimpse.html">glimpse()</a></code> podemos echar un vistazo a las variables del fichero (una fila por pasajero).</p>
<div class="sourceCode" id="cb1459"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/pkg/pillar/man/glimpse.html">glimpse</a></span><span class="op">(</span><span class="va">titanic</span><span class="op">)</span></code></pre></div>
<pre><code>## Rows: 891
## Columns: 12
## $ PassengerId &lt;int&gt; 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17,‚Ä¶
## $ Survived    &lt;int&gt; 0, 1, 1, 1, 0, 0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 1, 0, 1, 0, 1‚Ä¶
## $ Pclass      &lt;int&gt; 3, 1, 3, 1, 3, 3, 1, 3, 3, 2, 3, 1, 3, 3, 3, 2, 3, 2, 3, 3‚Ä¶
## $ Name        &lt;fct&gt; "Braund, Mr. Owen Harris", "Cumings, Mrs. John Bradley (Fl‚Ä¶
## $ Sex         &lt;fct&gt; male, female, female, female, male, male, male, male, fema‚Ä¶
## $ Age         &lt;dbl&gt; 22, 38, 26, 35, 35, NA, 54, 2, 27, 14, 4, 58, 20, 39, 14, ‚Ä¶
## $ SibSp       &lt;int&gt; 1, 1, 0, 1, 0, 0, 0, 3, 0, 1, 1, 0, 0, 1, 0, 0, 4, 0, 1, 0‚Ä¶
## $ Parch       &lt;int&gt; 0, 0, 0, 0, 0, 0, 0, 1, 2, 0, 1, 0, 0, 5, 0, 0, 1, 0, 0, 0‚Ä¶
## $ Ticket      &lt;fct&gt; A/5 21171, PC 17599, STON/O2. 3101282, 113803, 373450, 330‚Ä¶
## $ Fare        &lt;dbl&gt; 7.2500, 71.2833, 7.9250, 53.1000, 8.0500, 8.4583, 51.8625,‚Ä¶
## $ Cabin       &lt;fct&gt; , C85, , C123, , , E46, , , , G6, C103, , , , , , , , , , ‚Ä¶
## $ Embarked    &lt;fct&gt; S, C, S, S, S, Q, S, S, S, C, S, S, S, S, S, S, Q, S, S, C‚Ä¶</code></pre>
</div>
<div id="datos-covid-del-isciii-archivo-.csv" class="section level2">
<h2>
<span class="header-section-number">17.2</span> Datos covid del ISCIII (archivo .csv)<a class="anchor" aria-label="anchor" href="#datos-covid-del-isciii-archivo-.csv"><i class="fas fa-link"></i></a>
</h2>
<blockquote>
<p>Fuente original de los datos: <a href="https://cnecovid.isciii.es/covid19/resources/casos_tecnica_ccaa.csv" class="uri">https://cnecovid.isciii.es/covid19/resources/casos_tecnica_ccaa.csv</a></p>
</blockquote>
<p>Otra opci√≥n habitual son los <mark><strong>archivos <code>.csv</code> (comma separated values)</strong></mark>: son archivos cuyos <mark><strong>valores est√°n separados por comas</strong></mark> (u otro caracter, como <strong>puntos</strong>, puntos y comas, o tabuladores). En apariencia cuando los abrimos en el ordenador son como un Excel (ya que los abre el Excel), pero ocupan mucho menos que un Excel y su <strong>lectura es universal</strong> (independiente de tener instalado o no el Excel) ya que son archivos de texto <strong>sin formato</strong>.</p>
<p>Para leer un archivo <code>.csv</code> tenemos <mark><strong>dos opciones</strong></mark>. La primera es usar la funci√≥n <code><a href="https://rdrr.io/r/utils/read.table.html">read.csv()</a></code> que ya viene de base con <code>R</code>, y asignarle al argumento <code>file</code> la ruta del archivo (tiene otros argumentos extras por si queremos especifiar el caracter que separa las columnas, si inclu√≠mos o no una cabecera de la tabla, y otros argumentos que puedes consultar con <code><a href="https://rdrr.io/r/utils/read.table.html">? read.csv</a></code>). Para mostrar un ejemplo vamos a realizar la carga del mismo fichero del Titanic pero ahora a trav√©s del archivo <code>titanic.csv</code> que tenemos en nuestra carpeta <code>DATOS</code>.</p>
<div class="sourceCode" id="cb1461"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">titanic</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html">read.csv</a></span><span class="op">(</span>file <span class="op">=</span> <span class="st">"./DATOS/titanic.csv"</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">titanic</span><span class="op">)</span></code></pre></div>
<pre><code>##   PassengerId Survived Pclass
## 1           1        0      3
## 2           2        1      1
## 3           3        1      3
## 4           4        1      1
## 5           5        0      3
## 6           6        0      3
##                                                  Name    Sex Age SibSp Parch
## 1                             Braund, Mr. Owen Harris   male  22     1     0
## 2 Cumings, Mrs. John Bradley (Florence Briggs Thayer) female  38     1     0
## 3                              Heikkinen, Miss. Laina female  26     0     0
## 4        Futrelle, Mrs. Jacques Heath (Lily May Peel) female  35     1     0
## 5                            Allen, Mr. William Henry   male  35     0     0
## 6                                    Moran, Mr. James   male  NA     0     0
##             Ticket    Fare Cabin Embarked
## 1        A/5 21171  7.2500              S
## 2         PC 17599 71.2833   C85        C
## 3 STON/O2. 3101282  7.9250              S
## 4           113803 53.1000  C123        S
## 5           373450  8.0500              S
## 6           330877  8.4583              Q</code></pre>
<p>Una diferencia con los <code>.RData</code> es que estos no necesitan que le asignemos el valor a una variable (dentro de un <code>.RData</code> tenemos ya guardada la variable). F√≠jate que es el <strong>mismo archivo que antes</strong>, y que nos lo ha guardado en formato <code>data.frame</code>.</p>
<p><mark><strong>¬øC√≥mo podr√≠amos cargar un <code>.csv</code> pero ya guardado en <code>tibble</code>?</strong></mark> Para ello usaremos la funci√≥n <code><a href="https://rdrr.io/pkg/readr/man/read_delim.html">read_csv()</a></code> del paquete <a href="https://readr.tidyverse.org">readr</a>.</p>
<div class="sourceCode" id="cb1463"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://readr.tidyverse.org">readr</a></span><span class="op">)</span>
<span class="va">titanic</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/readr/man/read_delim.html">read_csv</a></span><span class="op">(</span>file <span class="op">=</span> <span class="st">"./DATOS/titanic.csv"</span><span class="op">)</span>
<span class="va">titanic</span></code></pre></div>
<pre><code>## # A tibble: 891 √ó 12
##    PassengerId Survived Pclass Name   Sex     Age SibSp Parch Ticket  Fare Cabin
##          &lt;dbl&gt;    &lt;dbl&gt;  &lt;dbl&gt; &lt;chr&gt;  &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;  &lt;dbl&gt; &lt;chr&gt;
##  1           1        0      3 Braun‚Ä¶ male     22     1     0 A/5 2‚Ä¶  7.25 &lt;NA&gt; 
##  2           2        1      1 Cumin‚Ä¶ fema‚Ä¶    38     1     0 PC 17‚Ä¶ 71.3  C85  
##  3           3        1      3 Heikk‚Ä¶ fema‚Ä¶    26     0     0 STON/‚Ä¶  7.92 &lt;NA&gt; 
##  4           4        1      1 Futre‚Ä¶ fema‚Ä¶    35     1     0 113803 53.1  C123 
##  5           5        0      3 Allen‚Ä¶ male     35     0     0 373450  8.05 &lt;NA&gt; 
##  6           6        0      3 Moran‚Ä¶ male     NA     0     0 330877  8.46 &lt;NA&gt; 
##  7           7        0      1 McCar‚Ä¶ male     54     0     0 17463  51.9  E46  
##  8           8        0      3 Palss‚Ä¶ male      2     3     1 349909 21.1  &lt;NA&gt; 
##  9           9        1      3 Johns‚Ä¶ fema‚Ä¶    27     0     2 347742 11.1  &lt;NA&gt; 
## 10          10        1      2 Nasse‚Ä¶ fema‚Ä¶    14     1     0 237736 30.1  &lt;NA&gt; 
## # ‚Ä¶ with 881 more rows, and 1 more variable: Embarked &lt;chr&gt;</code></pre>
<p>¬†</p>
<p>Una de las ventajas de la carga de archivos en <code>R</code> es que muchos formatos podemos cargarlos sin <mark><strong>ni siquiera tener el archivo en nuestro ordenador</strong></mark>, a trav√©s de un enlace web. Vamos a ver un ejemplo con los datos del ISCIII sobre la pandemia. En su web <a href="https://cnecovid.isciii.es/covid19/#documentaci%C3%B3n-y-datos" class="uri">https://cnecovid.isciii.es/covid19/#documentaci%C3%B3n-y-datos</a> tienen varios archivos colgados, que podemos o bien descargarlos, o haciendo click derecho <mark><strong>¬´Copiar direcci√≥n de enlace¬ª</strong></mark> obtenemos un enlace. Por ejemplo, para el archivo <code>casos_tecnica_ccaa.csv</code>, que nos almacena el n√∫mero de casos por t√©cnica diagn√≥stica y CCAA, tenemos el enlace <a href="https://cnecovid.isciii.es/covid19/resources/casos_tecnica_ccaa.csv" class="uri">https://cnecovid.isciii.es/covid19/resources/casos_tecnica_ccaa.csv</a>. Dicho enlace es el que se abre cuando pulsamos en Descargar, pero podemos introducirlo directamente en <code>R</code>, sustituyendo a nuestra ruta en <code><a href="https://rdrr.io/pkg/readr/man/read_delim.html">read_csv()</a></code>, y teni√©ndolo ya almacenado en formato <code>tibble</code>.</p>
<div class="sourceCode" id="cb1465"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">datos_ISCIII</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/readr/man/read_delim.html">read_csv</a></span><span class="op">(</span>file <span class="op">=</span> <span class="st">"https://cnecovid.isciii.es/covid19/resources/casos_tecnica_ccaa.csv"</span><span class="op">)</span>
<span class="va">datos_ISCIII</span></code></pre></div>
<pre><code>## # A tibble: 14,269 √ó 8
##    ccaa_iso fecha      num_casos num_casos_prueba_pcr num_casos_prueba_test_ac
##    &lt;chr&gt;    &lt;date&gt;         &lt;dbl&gt;                &lt;dbl&gt;                    &lt;dbl&gt;
##  1 AN       2020-01-01         0                    0                        0
##  2 AR       2020-01-01         0                    0                        0
##  3 AS       2020-01-01         0                    0                        0
##  4 CB       2020-01-01         0                    0                        0
##  5 CE       2020-01-01         0                    0                        0
##  6 CL       2020-01-01         0                    0                        0
##  7 CM       2020-01-01         0                    0                        0
##  8 CN       2020-01-01         0                    0                        0
##  9 CT       2020-01-01         0                    0                        0
## 10 EX       2020-01-01         0                    0                        0
## # ‚Ä¶ with 14,259 more rows, and 3 more variables: num_casos_prueba_ag &lt;dbl&gt;,
## #   num_casos_prueba_elisa &lt;dbl&gt;, num_casos_prueba_desconocida &lt;dbl&gt;</code></pre>
<div class="sourceCode" id="cb1467"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/dim.html">dim</a></span><span class="op">(</span><span class="va">datos_ISCIII</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] 14269     8</code></pre>
<div class="sourceCode" id="cb1469"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/pkg/pillar/man/glimpse.html">glimpse</a></span><span class="op">(</span><span class="va">datos_ISCIII</span><span class="op">)</span></code></pre></div>
<pre><code>## Rows: 14,269
## Columns: 8
## $ ccaa_iso                     &lt;chr&gt; "AN", "AR", "AS", "CB", "CE", "CL", "CM",‚Ä¶
## $ fecha                        &lt;date&gt; 2020-01-01, 2020-01-01, 2020-01-01, 2020‚Ä¶
## $ num_casos                    &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1,‚Ä¶
## $ num_casos_prueba_pcr         &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1,‚Ä¶
## $ num_casos_prueba_test_ac     &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,‚Ä¶
## $ num_casos_prueba_ag          &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,‚Ä¶
## $ num_casos_prueba_elisa       &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,‚Ä¶
## $ num_casos_prueba_desconocida &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,‚Ä¶</code></pre>
<p>Como puedes ver con <code><a href="https://rdrr.io/pkg/pillar/man/glimpse.html">glimpse(datos_ISCIII)</a></code>, el archivo tiene <strong>8 columnas</strong>: un c√≥digo identificador de las CCAA, la fecha, y 6 variables relativas a casos detectados (en funci√≥n de la t√©cnica con la que se ha detectado). Y adem√°s tiene un <strong>n√∫mero de filas</strong> igual a las 19 CCAA (17 + Ceuta + Melilla) por el n√∫mero de d√≠as en los que hay registros.</p>
<p><mark><strong>¬øCu√°l es la ventaja de cargarlo as√≠?</strong></mark> Ese enlace es fijo, y tendr√° siempre el √∫ltimo archivo que hayan actualizado, sin preocuparnos de tener que bajarnos cada d√≠a el archivo: simplemente ejecutamos dicha carga, y tenemos asegurado que nos bajaremos el archivo lo m√°s actualizado posible, de manera autom√°tica.</p>
</div>
<div id="discursos-de-los-jefes-de-estado-archivo-.txt" class="section level2">
<h2>
<span class="header-section-number">17.3</span> Discursos de los jefes de Estado (archivo .txt)<a class="anchor" aria-label="anchor" href="#discursos-de-los-jefes-de-estado-archivo-.txt"><i class="fas fa-link"></i></a>
</h2>
<blockquote>
<p>Fuente original de los datos: <a href="https://github.com/lirondos/discursos-de-navidad/tree/master/data/speeches" class="uri">https://github.com/lirondos/discursos-de-navidad/tree/master/data/speeches</a></p>
</blockquote>
<p>Una de las <mark><strong>herramientas m√°s √∫tiles</strong></mark> a la hora de aprender de la comunidad es la <mark><strong>plataforma Github</strong></mark>, un repositorio donde podemos subir c√≥digos en abierto, proponer cambios para subsanar errores de trabajos ajenos, que otros subsanen los nuestros, y una base de datos bastante extensa de paquetes y conjuntos de datos. El <mark><strong>c√≥digo de este mismo manual</strong></mark> lo puedes consultar en <a href="https://github.com/dadosdelaplace/courses-ECI-2022" class="uri">https://github.com/dadosdelaplace/courses-ECI-2022</a></p>
<p>De dicha plataforma vamos a leer los siguientes datos, en concreto del <strong>repositorio de Github de la experta en ling√º√≠stica</strong> computacional <a href="https://lirondos.github.io/">Elena √Ålvarez Mellado</a>. En su <a href="https://github.com/lirondos">repositorio</a> tiene guardados los <a href="https://github.com/lirondos/discursos-de-navidad/tree/master/data/speeches">discursos navide√±os</a> de los jefes de Estado (los democr√°ticos y los no democr√°ticos, desde Franco hasta Felipe VI), desde 1937 hasta 2021.</p>
<div class="figure" style="text-align: center">
<span style="display:block;" id="fig:discursos"></span>
<img src="img/foto_discursos.jpg" alt="Discursos guardados en el repositorio de &lt;https://github.com/lirondos/discursos-de-navidad&gt;." width="55%"><p class="caption">
Imagen/gr√°fica 17.1: Discursos guardados en el repositorio de <a href="https://github.com/lirondos/discursos-de-navidad" class="uri">https://github.com/lirondos/discursos-de-navidad</a>.
</p>
</div>
<p>El discurso de cada a√±o est√° guardado en un <mark><strong>archivo <code>.txt</code></strong></mark>, un archivo que no tiene una estructura tabular (con filas y columnas, separadas por caracteres) como los archivos <code>.csv</code>. Para este tipo de archivos podemos usar <code>read_delim</code>, √≠ndicalo que lea cada p√°rrafo como un ¬´todo¬ª, con <code>delim = "\t"</code> (le decimos que el delimitador entre elementos sea el salto de l√≠nea).</p>
<div class="sourceCode" id="cb1471"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">discurso_1937</span> <span class="op">&lt;-</span>
  <span class="fu"><a href="https://rdrr.io/pkg/readr/man/read_delim.html">read_delim</a></span><span class="op">(</span>file <span class="op">=</span> <span class="st">"https://raw.githubusercontent.com/lirondos/discursos-de-navidad/master/data/speeches/1937.txt"</span>, delim <span class="op">=</span> <span class="st">"\t"</span><span class="op">)</span>
<span class="va">discurso_1937</span></code></pre></div>
<pre><code>## # A tibble: 3 √ó 1
##   `COMBATIENTES de Espa√±a:`                                                     
##   &lt;chr&gt;                                                                         
## 1 A los que est√°is en las trincheras bajo la lluvia y el fr√≠o y las balas, yo o‚Ä¶
## 2 ¬°Combatientes de Espa√±a!, por la victoria de nuestra Causa, que es la Causa d‚Ä¶
## 3 ¬°Arriba Espa√±a!</code></pre>
<p>De cada frase guardada (cada fila) podemos extraer cada palabra con la funci√≥n <code><a href="https://rdrr.io/pkg/stringr/man/str_split.html">str_split()</a></code>, del paquete <a href="http://stringr.tidyverse.org">stringr</a>, y con <code>pattern = " "</code> le indicamos que separe por los espacios entre las palabras.</p>
<div class="sourceCode" id="cb1473"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="http://stringr.tidyverse.org">stringr</a></span><span class="op">)</span>
<span class="co"># Primera frase separando palabras</span>
<span class="fu"><a href="https://rdrr.io/pkg/stringr/man/str_split.html">str_split</a></span><span class="op">(</span><span class="va">discurso_1937</span><span class="op">[</span><span class="fl">1</span>, <span class="op">]</span>, pattern <span class="op">=</span> <span class="st">" "</span><span class="op">)</span></code></pre></div>
<pre><code>## [[1]]
##   [1] "A"            "los"          "que"          "est√°is"       "en"          
##   [6] "las"          "trincheras"   "bajo"         "la"           "lluvia"      
##  [11] "y"            "el"           "fr√≠o"         "y"            "las"         
##  [16] "balas,"       "yo"           "os"           "env√≠o"        "mi"          
##  [21] "fe"           "ardiente"     "que"          "se"           "une"         
##  [26] "con"          "la"           "vuestra"      "de"           "una"         
##  [31] "pr√≥xima"      "y"            "definitiva"   "victoria."    "A"           
##  [36] "los"          "que"          "en"           "la"           "segunda"     
##  [41] "l√≠nea"        "padec√©is"     "dolor"        "y"            "sufrimiento" 
##  [46] "-viudas,"     "madres;"      "hijos"        "hermanos-"    "os"          
##  [51] "mando"        "mi"           "piedad"       "y"            "mi"          
##  [56] "gratitud"     "por"          "vuestro"      "esfuerzo"     "que"         
##  [61] "es"           "el"           "combate"      "silencioso"   "de"          
##  [66] "todos"        "los"          "d√≠as"         "para"         "que"         
##  [71] "la"           "victoria"     "se"           "alcance"      "en"          
##  [76] "la"           "primera"      "l√≠nea,"       "para"         "que"         
##  [81] "sea"          "fecundo"      "y"            "duradero"     "el"          
##  [86] "af√°n"         "de"           "vuestros"     "combatientes" "por"         
##  [91] "la"           "instauraci√≥n" "de"           "un"           "orden"       
##  [96] "nuevo."       "A"            "vosotros,"    "trabajadores" "de"          
## [101] "Espa√±a,"      "que"          "dais"         "vuestras"     "fatigas"     
## [106] "por"          "una"          "Espa√±a"       "mejor"        "y"           
## [111] "m√°s"          "justa,"       "yo"           "as√≠"          "os"          
## [116] "lo"           "prometo."     "A"            "todos"        "os"          
## [121] "mando"        "mi"           "aliento"      "y"            "mi"          
## [126] "cari√±o."</code></pre>
<p>Ya veremos como analizar textos m√°s en detalle.</p>
</div>
<div id="pisos-en-boston-archivo-excel-.xlsx" class="section level2">
<h2>
<span class="header-section-number">17.4</span> Pisos en Boston (archivo Excel .xlsx)<a class="anchor" aria-label="anchor" href="#pisos-en-boston-archivo-excel-.xlsx"><i class="fas fa-link"></i></a>
</h2>
<blockquote>
<p>Fuente original de los datos: <a href="https://doi.org/10.1016/0095-0696(78)90006-2" class="uri">https://doi.org/10.1016/0095-0696(78)90006-2</a></p>
</blockquote>
<p>Muchas veces no tendremos un <code>.csv</code> (por desgracia) y nos tocar√° <mark><strong>leer desde un excel</strong></mark>. Para ello deberemos instalar (la primera vez) y cargar el paquete <a href="https://readxl.tidyverse.org">readxl</a> que nos permitir√° usar funciones para cargar archivos <code>.xls</code> (la funci√≥n <code><a href="https://rdrr.io/pkg/readxl/man/read_excel.html">read_xls()</a></code>) y archivos <code>.xlsx</code> (la funci√≥n <code><a href="https://rdrr.io/pkg/readxl/man/read_excel.html">read_xlsx()</a></code>). Adem√°s del argumento <code>path</code> con la ruta del archivo, podemos en el argumento <code>sheet</code> indicarle la hoja de Excel a leer (en caso de tener varias).</p>
<p>Vamos a cargar el archivo <code>Boston.xlsx</code> que tenemos en la carpeta de <code>DATOS</code>, que contienen informaci√≥n del valor inmobiliario de 506 distritos de Boston, y lo guardamos en un <code>tibble</code>.</p>
<div class="sourceCode" id="cb1475"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="st">"readxl"</span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://readxl.tidyverse.org">readxl</a></span><span class="op">)</span>
<span class="va">boston</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/readxl/man/read_excel.html">read_xlsx</a></span><span class="op">(</span>path <span class="op">=</span> <span class="st">"./DATOS/Boston.xlsx"</span><span class="op">)</span>
<span class="va">boston</span></code></pre></div>
<p>El dataset <code>Boston</code> est√° basado en el estudio que realizaron <a href="https://doi.org/10.1016/0095-0696(78)90006-2">Harrison and Rubinfeld, 1978</a> en el que se pretende determinar la <strong>disposici√≥n de los compradores para pagar m√°s por una vivienda en un entorno con mayor calidad del aire</strong>. El conjunto de datos contiene datos del <strong>√°rea metropolitana de Boston</strong>, con datos de 560 vecindarios, midiendo 14 variables en cada uno.</p>
<p>Las variables est√°n totalmente descritas en <a href="https://doi.org/10.1016/0095-0696(78)90006-2">Harrison and Rubinfeld, 1978</a> pero podemos resumirlas de la siguiente forma:</p>
<ul>
<li>
<code>medv</code>: <strong>variable objetivo</strong>, representa la mediana del precio inmobiliario (en miles de dolares).</li>
<li>
<strong>Variables arquitect√≥nicas</strong>: <code>rm</code> (n√∫mero medio de habitaciones) y <code>age</code> (porcentaje de propiedades construidas antes de 1940).</li>
<li>
<strong>Variables de vecindario</strong>: <code>crim</code> (tasa de criminalidad), <code>zn</code> (porcentaje del territorio destinado a √°reas residenciales), <code>indus</code> (porcentaje del territorio destinado al tejido industrial), <code>chas</code> ( ¬øhay r√≠o limitando la extensi√≥n en el territorio?), <code>tax</code> (coste de los servicios p√∫blicos), <code>ptratio</code> (ratio alumno-profesor), <code>black</code> (√≠ndice de poblaci√≥n negra - s√≠, es un archivo vergonzoso, pero no viene mal ver los sesgo raciales de muchos de los datos que consumimos - calcualda como <span class="math inline">\(1000 ( B - 0.63)^2\)</span>, donde <span class="math inline">\(B\)</span> es el procentaje de poblaci√≥n negra) y <code>lstat</code> (porcentaje de la poblaci√≥n con bajos ingresos).</li>
<li>
<strong>Variables de accesibilidad</strong>: <code>dis</code> (distancia a oficinas de empleo) y <code>rad</code> (categor√≠a indicando la accesibilidad a la red de autopistas, a mayor √≠ndice, mayor accesibilidad).</li>
<li>
<strong>Variables de calidad del aire</strong>: <code>nox</code> (concentraci√≥n anual de √≥xido de nitr√≥geno, en partes por 10 millones).</li>
</ul>
<div class="sourceCode" id="cb1476"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Resumen del tibble</span>
<span class="fu"><a href="https://rdrr.io/pkg/pillar/man/glimpse.html">glimpse</a></span><span class="op">(</span><span class="va">boston</span><span class="op">)</span></code></pre></div>
<pre><code>## Rows: 506
## Columns: 14
## $ crim    &lt;dbl&gt; 0.00632, 0.02731, 0.02729, 0.03237, 0.06905, 0.02985, 0.08829,‚Ä¶
## $ zn      &lt;dbl&gt; 18.0, 0.0, 0.0, 0.0, 0.0, 0.0, 12.5, 12.5, 12.5, 12.5, 12.5, 1‚Ä¶
## $ indus   &lt;dbl&gt; 2.31, 7.07, 7.07, 2.18, 2.18, 2.18, 7.87, 7.87, 7.87, 7.87, 7.‚Ä¶
## $ chas    &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,‚Ä¶
## $ nox     &lt;dbl&gt; 0.538, 0.469, 0.469, 0.458, 0.458, 0.458, 0.524, 0.524, 0.524,‚Ä¶
## $ rm      &lt;dbl&gt; 6.575, 6.421, 7.185, 6.998, 7.147, 6.430, 6.012, 6.172, 5.631,‚Ä¶
## $ age     &lt;dbl&gt; 65.2, 78.9, 61.1, 45.8, 54.2, 58.7, 66.6, 96.1, 100.0, 85.9, 9‚Ä¶
## $ dis     &lt;dbl&gt; 4.0900, 4.9671, 4.9671, 6.0622, 6.0622, 6.0622, 5.5605, 5.9505‚Ä¶
## $ rad     &lt;dbl&gt; 1, 2, 2, 3, 3, 3, 5, 5, 5, 5, 5, 5, 5, 4, 4, 4, 4, 4, 4, 4, 4,‚Ä¶
## $ tax     &lt;dbl&gt; 296, 242, 242, 222, 222, 222, 311, 311, 311, 311, 311, 311, 31‚Ä¶
## $ ptratio &lt;dbl&gt; 15.3, 17.8, 17.8, 18.7, 18.7, 18.7, 15.2, 15.2, 15.2, 15.2, 15‚Ä¶
## $ black   &lt;dbl&gt; 396.90, 396.90, 392.83, 394.63, 396.90, 394.12, 395.60, 396.90‚Ä¶
## $ lstat   &lt;dbl&gt; 4.98, 9.14, 4.03, 2.94, 5.33, 5.21, 12.43, 19.15, 29.93, 17.10‚Ä¶
## $ medv    &lt;dbl&gt; 24.0, 21.6, 34.7, 33.4, 36.2, 28.7, 22.9, 27.1, 16.5, 18.9, 15‚Ä¶</code></pre>
</div>
<div id="estad√≠sticas-del-eurostat-desde-paquete" class="section level2">
<h2>
<span class="header-section-number">17.5</span> Estad√≠sticas del Eurostat (desde paquete)<a class="anchor" aria-label="anchor" href="#estad%C3%ADsticas-del-eurostat-desde-paquete"><i class="fas fa-link"></i></a>
</h2>
<blockquote>
<p>Fuente original de los datos: Eurostat</p>
</blockquote>
<p>Una opci√≥n muy com√∫n es <mark><strong>cargar datos desde paquetes que ya los tienen incorporadas</strong></mark> (o los consiguen a trav√©s de una API). Uno de los ejemplos m√°s √∫tiles seguramente sea el <mark><strong>paquete del EUROSTAT</strong></mark><a href="https://ropengov.github.io/eurostat/">eurostat</a>, un paquete para obtener <strong>datos abiertos de la Oficina Europea de Estad√≠stica</strong>. Puedes ver toda la documentaci√≥n en <a href="https://ropengov.github.io/eurostat/articles/articles/eurostat_tutorial.html" class="uri">https://ropengov.github.io/eurostat/articles/articles/eurostat_tutorial.html</a></p>
<p>Dicho paquete contiene la funci√≥n <code><a href="https://ropengov.github.io/eurostat/reference/search_eurostat.html">search_eurostat()</a></code>, que nos <mark><strong>permite buscar conjuntos de datos por palabras clave</strong></mark> (nos muestra una tabla con los datasets y sus c√≥digos).</p>
<div class="sourceCode" id="cb1478"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://ropengov.github.io/eurostat/">eurostat</a></span><span class="op">)</span> <span class="co"># instalar la primera vez</span>

<span class="co"># Buscamos datos por palabras clave</span>
<span class="va">datos_disponibles</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ropengov.github.io/eurostat/reference/search_eurostat.html">search_eurostat</a></span><span class="op">(</span><span class="st">"passengers"</span><span class="op">)</span>
<span class="va">datos_disponibles</span></code></pre></div>
<pre><code>## # A tibble: 22 √ó 8
##    title   code  type  `last update of‚Ä¶ `last table str‚Ä¶ `data start` `data end`
##    &lt;chr&gt;   &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;            &lt;chr&gt;            &lt;chr&gt;        &lt;chr&gt;     
##  1 Mariti‚Ä¶ tran‚Ä¶ data‚Ä¶ 02.12.2021       02.12.2021       1997         2020      
##  2 Air tr‚Ä¶ tran‚Ä¶ data‚Ä¶ 06.09.2021       06.09.2021       1993         2020      
##  3 Railwa‚Ä¶ tran‚Ä¶ data‚Ä¶ 21.09.2021       21.09.2021       2005         2020      
##  4 Mariti‚Ä¶ tran‚Ä¶ data‚Ä¶ 27.03.2009       08.02.2021       1978         2002      
##  5 Air tr‚Ä¶ tran‚Ä¶ data‚Ä¶ 27.03.2009       08.02.2021       1978         2002      
##  6 Air tr‚Ä¶ med_‚Ä¶ data‚Ä¶ 28.05.2020       01.06.2021       2005         2018      
##  7 Mariti‚Ä¶ med_‚Ä¶ data‚Ä¶ 28.05.2020       01.06.2021       2005         2018      
##  8 Mariti‚Ä¶ tran‚Ä¶ data‚Ä¶ 02.12.2021       02.12.2021       1997         2020      
##  9 Air tr‚Ä¶ tran‚Ä¶ data‚Ä¶ 06.09.2021       06.09.2021       1993         2020      
## 10 Railwa‚Ä¶ tran‚Ä¶ data‚Ä¶ 21.09.2021       21.09.2021       2005         2020      
## # ‚Ä¶ with 12 more rows, and 1 more variable: values &lt;chr&gt;</code></pre>
<div class="sourceCode" id="cb1480"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Mostramos la lista de los datos</span>
<span class="fu"><a href="https://rdrr.io/r/utils/View.html">View</a></span><span class="op">(</span><span class="va">datos_disponibles</span><span class="op">)</span></code></pre></div>
<p>Con la funci√≥n <code><a href="https://ropengov.github.io/eurostat/reference/get_eurostat.html">get_eurostat()</a></code> podemos <strong>acceder</strong> a ellos proporcionando el c√≥digo del archivo.</p>
</div>
<div id="datos-del-aemet-desde-paquete-api" class="section level2">
<h2>
<span class="header-section-number">17.6</span> Datos del AEMET (desde paquete + API)<a class="anchor" aria-label="anchor" href="#datos-del-aemet-desde-paquete-api"><i class="fas fa-link"></i></a>
</h2>
<blockquote>
<p>Fuente original de los datos: <a href="https://opendata.aemet.es" class="uri">https://opendata.aemet.es</a></p>
</blockquote>
<p>Una de las opciones m√°s comunes es acceder a datos de las administraciones p√∫blicas desde <code>R</code> pero <mark><strong>pasando por las API de datos abiertos</strong></mark> de las que algunas disponen. Una <a href="https://www.xataka.com/basics/api-que-sirve#:~:text=Qu%C3%A9%20es%20una%20API,interfaz%20de%20programaci%C3%B3n%20de%20aplicaciones.&amp;text=O%20cuando%20esa%20aplicaci%C3%B3n%20te%20manda%20notificaciones%20al%20m%C3%B3vil%20o%20al%20ordenador.">API</a> no es m√°s que una especie de <em>walkie-talkie</em> para <strong>comunicarnos con aplicaciones de terceros</strong>.</p>
<p>Un ejemplo pr√°ctico: la <mark><strong>API del AEMET</strong></mark> para acceder a los datos de parte de sus estaciones meteorol√≥gicas. A trav√©s de su <mark><strong>portal de datos abiertos</strong></mark> (ver <a href="https://opendata.aemet.es/centrodedescargas/inicio" class="uri">https://opendata.aemet.es/centrodedescargas/inicio</a>) vamos a extraer desde <code>R</code> los <mark><strong>datos meteorol√≥gicos de 291 estaciones</strong></mark> repartidas a lo largo de toda Espa√±a.</p>
<p>Para ello lo primero es acceder a la web <a href="https://opendata.aemet.es/centrodedescargas/obtencionAPIKey" class="uri">https://opendata.aemet.es/centrodedescargas/obtencionAPIKey</a> y solicitar una clave (una <em>api key</em> para poder usarla como ¬´contrase√±a¬ª en nuestra petici√≥n).</p>
<div class="sourceCode" id="cb1481"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Acceder a la web https://opendata.aemet.es/centrodedescargas/obtencionAPIKey desde R</span>
<span class="fu"><a href="https://rdrr.io/r/utils/browseURL.html">browseURL</a></span><span class="op">(</span><span class="st">"https://opendata.aemet.es/centrodedescargas/obtencionAPIKey"</span><span class="op">)</span></code></pre></div>
<p>Tras solicitarla y realizar los pasos que se indican en el mail que nos enviar√°n, <strong>obtendremos una clave</strong> similar a esta.</p>
<div class="sourceCode" id="cb1482"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Clave para conectar con la API del AEMET</span>
<span class="va">api_key</span> <span class="op">&lt;-</span> <span class="st">"eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJqYXZhbHYwOUB1Y20uZXMiLCJqdGkiOiIwNGUwYmQzNi1jZTMxLTQ5OTQtOTdkMy1hMzc4MDc1MzlhMjgiLCJpc3MiOiJBRU1FVCIsImlhdCI6MTY0MTU0OTg4MywidXNlcklkIjoiMDRlMGJkMzYtY2UzMS00OTk0LTk3ZDMtYTM3ODA3NTM5YTI4Iiwicm9sZSI6IiJ9.RCAITYkYO_uPOzTA830tuq6LZNgmiUGuQ2vB6hrZioI"</span>

<span class="co"># Definimos la api_key para toda la sesi√≥n</span>
<span class="fu"><a href="https://rdrr.io/r/base/Sys.setenv.html">Sys.setenv</a></span><span class="op">(</span>AEMET_API_KEY <span class="op">=</span> <span class="va">api_key</span><span class="op">)</span> </code></pre></div>
<p>El paquete que usaremos para conectarnos con el AEMET se llama <a href="https://ropenspain.github.io/climaemet/">climaemet</a>, y lo podremos <mark><strong>instalar directamente desde Github</strong></mark>, haciendo uso del paquete <a href="https://devtools.r-lib.org/">devtools</a>, y la funci√≥n <code>install_github</code>, indicando entre par√©ntesis el nombre del repositorio.</p>
<div class="sourceCode" id="cb1483"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Instalamos paquete climaemet</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://devtools.r-lib.org/">devtools</a></span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/pkg/devtools/man/remote-reexports.html">install_github</a></span><span class="op">(</span><span class="st">"ropenspain/climaemet"</span><span class="op">)</span></code></pre></div>
<p>Una vez instalado el paquete podemos acceder a las estaciones con <code><a href="https://ropenspain.github.io/climaemet/reference/aemet_stations.html">aemet_stations()</a></code>, pas√°ndole como argumento nuestra <code>api_key</code> (la tabla la vamos a convertir a <code>tibble</code>).</p>
<div class="sourceCode" id="cb1484"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Estaciones del AEMET</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://ropenspain.github.io/climaemet/">climaemet</a></span><span class="op">)</span>
<span class="va">tabla_estaciones</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/tibble/man/as_tibble.html">as_tibble</a></span><span class="op">(</span><span class="fu"><a href="https://ropenspain.github.io/climaemet/reference/aemet_stations.html">aemet_stations</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span>
<span class="va">tabla_estaciones</span></code></pre></div>
<pre><code>## # A tibble: 291 √ó 7
##    indicativo indsinop nombre                 provincia altitud longitud latitud
##    &lt;chr&gt;      &lt;chr&gt;    &lt;chr&gt;                  &lt;chr&gt;       &lt;dbl&gt;    &lt;dbl&gt;   &lt;dbl&gt;
##  1 0252D      "08186"  ARENYS DE MAR          BARCELONA      74     2.54    41.6
##  2 0076       "08181"  BARCELONA AEROPUERTO   BARCELONA       4     2.07    41.3
##  3 0200E      ""       BARCELONA, FABRA       BARCELONA     408     2.12    41.4
##  4 0201D      "08180"  BARCELONA              BARCELONA       6     2.2     41.4
##  5 0149X      "08174"  MANRESA                BARCELONA     291     1.84    41.7
##  6 0229I      "08192"  SABADELL AEROPUERTO    BARCELONA     146     2.10    41.5
##  7 0255B      "08188"  SANTA SUSANNA          BARCELONA      40     2.70    41.7
##  8 0367       "08184"  GIRONA AEROPUERTO      GIRONA        143     2.76    41.9
##  9 0370B      ""       GIRONA, ANTIC INSTITUT GIRONA         95     2.83    42.0
## 10 0372C      "08120"  PORQUERES              GIRONA        157     2.76    42.1
## # ‚Ä¶ with 281 more rows</code></pre>
<p>En la variable <code>indicativo</code> tenemos el c√≥digo de cada estaci√≥n. Vamos a <mark><strong>acceder a los √∫ltimos registros</strong></mark> de la estaci√≥n <code>BARCELONA AEROPUERTO</code> con el identificador <code>0076</code>, haciendo uso de la funci√≥n <code><a href="https://ropenspain.github.io/climaemet/reference/aemet_last_obs.html">aemet_last_obs()</a></code>.</p>
<div class="sourceCode" id="cb1486"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">datos_bcn_aeropuerto</span> <span class="op">&lt;-</span>
  <span class="fu"><a href="https://rdrr.io/pkg/tibble/man/as_tibble.html">as_tibble</a></span><span class="op">(</span><span class="fu"><a href="https://ropenspain.github.io/climaemet/reference/aemet_last_obs.html">aemet_last_obs</a></span><span class="op">(</span><span class="st">"0076"</span><span class="op">)</span><span class="op">)</span>
<span class="va">datos_bcn_aeropuerto</span></code></pre></div>
<pre><code>## # A tibble: 23 √ó 23
##    idema   lon fint                 prec   alt  vmax    vv    dv   lat  dmax
##    &lt;chr&gt; &lt;dbl&gt; &lt;dttm&gt;              &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
##  1 0076   2.07 2022-01-23 12:00:00     0     4   5.1   0.9    20  41.3    10
##  2 0076   2.07 2022-01-23 13:00:00     0     4   5.7   2.8   140  41.3   150
##  3 0076   2.07 2022-01-23 14:00:00     0     4   4.6   2.6   180  41.3   140
##  4 0076   2.07 2022-01-23 15:00:00     0     4   4.6   3.1   200  41.3   190
##  5 0076   2.07 2022-01-23 16:00:00     0     4   4.6   2.4   220  41.3   210
##  6 0076   2.07 2022-01-23 17:00:00     0     4   2.6   1.4   260  41.3   200
##  7 0076   2.07 2022-01-23 18:00:00     0     4   2.1   1     310  41.3   260
##  8 0076   2.07 2022-01-23 19:00:00     0     4   2.1   1.2   340  41.3   340
##  9 0076   2.07 2022-01-23 20:00:00     0     4   3.1   2.3   350  41.3   360
## 10 0076   2.07 2022-01-23 21:00:00     0     4   4.1   3.3   360  41.3   360
## # ‚Ä¶ with 13 more rows, and 13 more variables: ubi &lt;chr&gt;, pres &lt;dbl&gt;, hr &lt;dbl&gt;,
## #   stdvv &lt;dbl&gt;, ts &lt;dbl&gt;, pres_nmar &lt;dbl&gt;, tamin &lt;dbl&gt;, ta &lt;dbl&gt;, tamax &lt;dbl&gt;,
## #   tpr &lt;dbl&gt;, vis &lt;dbl&gt;, stddv &lt;dbl&gt;, inso &lt;dbl&gt;</code></pre>
<p>Tambi√©n podemos <strong>indicarle un rango de fechas</strong> de la que extraer informaci√≥n.</p>
<div class="sourceCode" id="cb1488"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">datos</span> <span class="op">&lt;-</span>
  <span class="fu"><a href="https://rdrr.io/pkg/tibble/man/as_tibble.html">as_tibble</a></span><span class="op">(</span><span class="fu"><a href="https://ropenspain.github.io/climaemet/reference/aemet_daily.html">aemet_daily_clim</a></span><span class="op">(</span><span class="st">"0076"</span>,
                             start <span class="op">=</span> <span class="st">"2018-01-01"</span>,
                             end <span class="op">=</span> <span class="st">"2021-12-31"</span><span class="op">)</span><span class="op">)</span>
<span class="va">datos</span></code></pre></div>
<pre><code>## # A tibble: 1,461 √ó 20
##    fecha      indicativo nombre     provincia altitud  tmed prec   tmin horatmin
##    &lt;date&gt;     &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;       &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt; &lt;dbl&gt; &lt;chr&gt;   
##  1 2018-01-01 0076       BARCELONA‚Ä¶ BARCELONA       4  13.2 0,0     9.7 07:27   
##  2 2018-01-02 0076       BARCELONA‚Ä¶ BARCELONA       4  13.6 0,0     8.3 03:17   
##  3 2018-01-03 0076       BARCELONA‚Ä¶ BARCELONA       4  16.8 0,0    10.6 05:22   
##  4 2018-01-04 0076       BARCELONA‚Ä¶ BARCELONA       4  18.9 0,0    14.3 22:05   
##  5 2018-01-05 0076       BARCELONA‚Ä¶ BARCELONA       4  15   0,0    10   23:53   
##  6 2018-01-06 0076       BARCELONA‚Ä¶ BARCELONA       4  11.8 0,1     7.5 06:44   
##  7 2018-01-07 0076       BARCELONA‚Ä¶ BARCELONA       4  11.2 6,8     6.7 23:13   
##  8 2018-01-08 0076       BARCELONA‚Ä¶ BARCELONA       4   9.7 0,0     5.5 03:54   
##  9 2018-01-09 0076       BARCELONA‚Ä¶ BARCELONA       4   9.6 0,0     4.6 06:20   
## 10 2018-01-10 0076       BARCELONA‚Ä¶ BARCELONA       4  10.6 0,0     6.4 08:01   
## # ‚Ä¶ with 1,451 more rows, and 11 more variables: tmax &lt;dbl&gt;, horatmax &lt;chr&gt;,
## #   dir &lt;chr&gt;, velmedia &lt;dbl&gt;, racha &lt;dbl&gt;, horaracha &lt;chr&gt;, sol &lt;dbl&gt;,
## #   presMax &lt;dbl&gt;, horaPresMax &lt;chr&gt;, presMin &lt;dbl&gt;, horaPresMin &lt;chr&gt;</code></pre>
<p>Datos desde el AEMET a nuestro <code>R</code>, listos para analizar.</p>
</div>
<div id="canciones-de-spotify-desde-paquete-api" class="section level2">
<h2>
<span class="header-section-number">17.7</span> Canciones de Spotify (desde paquete + API)<a class="anchor" aria-label="anchor" href="#canciones-de-spotify-desde-paquete-api"><i class="fas fa-link"></i></a>
</h2>
</div>
<div id="tweets-de-twitter-desde-paquete-api" class="section level2">
<h2>
<span class="header-section-number">17.8</span> Tweets de Twitter (desde paquete + API)<a class="anchor" aria-label="anchor" href="#tweets-de-twitter-desde-paquete-api"><i class="fas fa-link"></i></a>
</h2>
</div>
<div id="datos-de-our-world-in-data-paquete" class="section level2">
<h2>
<span class="header-section-number">17.9</span> Datos de Our World in Data (paquete)<a class="anchor" aria-label="anchor" href="#datos-de-our-world-in-data-paquete"><i class="fas fa-link"></i></a>
</h2>
<p>Uno de los protagonistas de los √∫ltimos a√±os debido a la pandemia ha sido la web <mark><a href="https://ourworldindata.org/"><strong>Our World in Data</strong></a></mark>, y en concreto los datos que han recopilado de covid y vacunaci√≥n de todos los pa√≠ses del mundo. Y s√≠, podemos acceder a ellos directamente desde <code>R</code> a trav√©s del paquete <code>{owidR}</code>.</p>
<div class="sourceCode" id="cb1490"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="st">"owidR"</span><span class="op">)</span></code></pre></div>
<div class="sourceCode" id="cb1491"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va">owidR</span><span class="op">)</span></code></pre></div>
<p>Con la funci√≥n <code><a href="https://rdrr.io/pkg/owidR/man/owid_search.html">owid_search()</a></code> podemos introducir una palabra clave, para <mark><strong>obtener el listado de datasets</strong></mark> y su palabra clave.</p>
</div>
<div id="datos-electorales-desde-paquete-api" class="section level2">
<h2>
<span class="header-section-number">17.10</span> Datos electorales (desde paquete + API)<a class="anchor" aria-label="anchor" href="#datos-electorales-desde-paquete-api"><i class="fas fa-link"></i></a>
</h2>
<blockquote>
<p>Fuente original de los datos: <a href="http://www.infoelectoral.mir.es/infoelectoral" class="uri">http://www.infoelectoral.mir.es/infoelectoral</a></p>
</blockquote>
<p>Aunque a√∫n funcionan con algunas limitaciones, tambi√©n existen ya paquetes para poder <mark><strong>descargarnos directamente los datos de cualquier proceso electoral</strong></mark> celebrado en Espa√±a. Una de esas herramientas es el paquete <a href="https://github.com/rOpenSpain/infoelectoral">infoelectoral</a>, que podemos instalar desde el repositorio <code>ropenspain/infoelectoral</code>.</p>
<div class="sourceCode" id="cb1492"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://devtools.r-lib.org/">devtools</a></span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/pkg/devtools/man/remote-reexports.html">install_github</a></span><span class="op">(</span><span class="st">"ropenspain/infoelectoral"</span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/rOpenSpain/infoelectoral">infoelectoral</a></span><span class="op">)</span></code></pre></div>
<p>Dicho paquete nos permite con <code><a href="https://rdrr.io/pkg/infoelectoral/man/municipios.html">municipios()</a></code> <mark><strong>descargarnos directamente los resultados electorales</strong></mark> a nivel municipal por tipo de elecci√≥n (<code>tipo_eleccion</code>), a√±o (<code>anno</code>) y mes (<code>mes</code>). Veamos un ejemplo con las elecciones generales de noviembre de 2019.</p>
<div class="sourceCode" id="cb1493"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">datos_2019</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/infoelectoral/man/municipios.html">municipios</a></span><span class="op">(</span>tipo_eleccion <span class="op">=</span> <span class="st">"congreso"</span>,
                       anno <span class="op">=</span> <span class="fl">2019</span>, mes <span class="op">=</span> <span class="fl">11</span><span class="op">)</span></code></pre></div>
<p>Tiene otras funciones para descargar los datos a nivel de mesa electoral. Puedes <mark><strong>consultar m√°s paquetes relacionados con API de la administraci√≥n</strong></mark> y sus plataformas de microdatos (INE, BOE, etc) en <a href="https://ropenspain.es/paquetes/" class="uri">https://ropenspain.es/paquetes/</a></p>
</div>
<div id="partidas-de-ajedrez-desde-github" class="section level2">
<h2>
<span class="header-section-number">17.11</span> Partidas de ajedrez (desde Github)<a class="anchor" aria-label="anchor" href="#partidas-de-ajedrez-desde-github"><i class="fas fa-link"></i></a>
</h2>
<blockquote>
<p>Fuente original de los datos: <a href="https://chess.com" class="uri">https://chess.com</a></p>
</blockquote>
<p>En <code>R</code> se pueden cargar los datos m√°s varipintos que te imaginas. A veces los c√≥digos o paquetes no siempre est√°n aprobados como paquete pero podemos <mark><strong>instalarlos directamente desde Github</strong></mark>, haciendo uso del paquete <a href="https://devtools.r-lib.org/">devtools</a>, y la funci√≥n <code>install_github</code>, indicando entre par√©ntesis el nombre del repositorio. En este caso vamos a usar un repositorio (<a href="https://github.com/JaseZiv/chessR" class="uri">https://github.com/JaseZiv/chessR</a>) que nos permitir√° analizar <mark><strong>partidas de ajedrez</strong></mark> de <a href="https://chess.com" class="uri">https://chess.com</a>.</p>
<div class="sourceCode" id="cb1494"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Instalamos paquete desde Github</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://devtools.r-lib.org/">devtools</a></span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/pkg/devtools/man/remote-reexports.html">install_github</a></span><span class="op">(</span><span class="st">"JaseZiv/chessR"</span><span class="op">)</span></code></pre></div>
<p>Una vez instalado vamos a <mark><strong>acceder al historial de mis partidas de ajedres</strong></mark> usando mi usuario en dicha plataforma <code>usernames = "dadosdelaplace"</code>.</p>
<div class="sourceCode" id="cb1495"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Accedemos a datos de chess.com</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/JaseZiv/chessR">chessR</a></span><span class="op">)</span>
<span class="va">datos</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/chessR/man/get_game_data.html">get_game_data</a></span><span class="op">(</span>usernames <span class="op">=</span> <span class="st">"dadosdelaplace"</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">datos</span><span class="op">)</span></code></pre></div>
<pre><code>##   rules time_class      Event      Site       Date Round             White
## 1 chess      blitz Live Chess Chess.com 2020-11-18     -    DadosDeLaplace
## 2 chess      blitz Live Chess Chess.com 2020-11-18     - Gotham_darkKnight
## 3 chess      blitz Live Chess Chess.com 2020-11-18     -    DadosDeLaplace
## 4 chess      blitz Live Chess Chess.com 2020-11-18     -        iankyle124
## 5 chess      blitz Live Chess Chess.com 2020-11-18     -    DadosDeLaplace
## 6 chess      rapid Live Chess Chess.com 2020-11-18     -       FilipKing22
##            Black Result
## 1      marchhh67    0-1
## 2 DadosDeLaplace    1-0
## 3        eloycob    0-1
## 4 DadosDeLaplace    1-0
## 5        Jatin68    0-1
## 6 DadosDeLaplace    0-1
##                                                   CurrentPosition Timezone ECO
## 1   r2qkbnr/ppp1pppp/2n5/3p4/3PP1b1/5N2/PPP2PPP/RNBQKB1R w KQkq -      UTC B00
## 2                  rn2k3/ppp2rPQ/8/3P4/2B4P/N7/P4B2/b3K2R w KQq -      UTC C23
## 3   r2qkbnr/1ppn1pp1/p2pp2p/3P4/4P3/2N2N2/P1P2PPP/R1BQKR2 w Qkq -      UTC C00
## 4                       8/p1p5/2B5/1P1Rp1Kp/2k1P1P1/8/4r3/8 b - -      UTC C25
## 5 r1bqkb1r/pp1np1pp/2p2p1n/3p4/3P3B/2N5/PPP1PPPP/RQ2KBNR w KQkq -      UTC D00
## 6    rnb1k2r/p4ppp/2p5/8/1bP1n1P1/1N2P2P/PP1P1qB1/RNBQ1K1R w kq -      UTC C40
##                                                                                          ECOUrl
## 1                     https://www.chess.com/openings/Nimzowitsch-Defense-Scandinavian-Variation
## 2                                    https://www.chess.com/openings/Bishops-Opening-Khan-Gambit
## 3                                https://www.chess.com/openings/French-Defense-Normal-Variation
## 4                                             https://www.chess.com/openings/Vienna-Game-2...d6
## 5                         https://www.chess.com/openings/Queens-Pawn-Opening-Chigorin-Variation
## 6 https://www.chess.com/openings/Kings-Pawn-Opening-Kings-Knight-Elephant-Paulsen-Countergambit
##      UTCDate  UTCTime WhiteElo BlackElo TimeControl
## 1 2020.11.18 17:53:26      584      736         180
## 2 2020.11.18 17:55:52      512      436         180
## 3 2020.11.18 18:00:33      368      540         180
## 4 2020.11.18 18:02:45      421      304         300
## 5 2020.11.18 18:10:38      234      278         300
## 6 2020.11.18 18:19:09      774      982         600
##                            Termination StartTime    EndDate  EndTime
## 1       marchhh67 won - game abandoned  17:53:26 2020-11-18 17:54:41
## 2 Gotham_darkKnight won by resignation  17:55:52 2020-11-18 18:00:22
## 3           eloycob won by resignation  18:00:33 2020-11-18 18:02:23
## 4               iankyle124 won on time  18:02:45 2020-11-18 18:10:05
## 5         Jatin68 won - game abandoned  18:10:38 2020-11-18 18:12:02
## 6      DadosDeLaplace won by checkmate  18:19:09 2020-11-18 18:23:08
##                                         Link
## 1 https://www.chess.com/game/live/5771307946
## 2 https://www.chess.com/game/live/5771323289
## 3 https://www.chess.com/game/live/5771354149
## 4 https://www.chess.com/game/live/5771367684
## 5 https://www.chess.com/game/live/5771419623
## 6 https://www.chess.com/game/live/5771474982
##                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             Moves
## 1                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            \n1. d4 {[%clk 0:02:57.5]} 1... d5 {[%clk 0:02:59.5]} 2. e4 {[%clk 0:02:52.2]} 2... Nc6 {[%clk 0:02:58]} 3. Nf3 {[%clk 0:02:46.7]} 3... Bg4 {[%clk 0:02:55.5]} 0-1\n
## 2                                                                                                                                                                                                                                                                                                                                                                                                                                                 \n1. e4 {[%clk 0:02:59.9]} 1... e5 {[%clk 0:02:56.6]} 2. Bc4 {[%clk 0:02:58.5]} 2... d5 {[%clk 0:02:42.6]} 3. exd5 {[%clk 0:02:55.4]} 3... Nf6 {[%clk 0:02:30.4]} 4. Nf3 {[%clk 0:02:51.8]} 4... Bg4 {[%clk 0:02:20.5]} 5. h3 {[%clk 0:02:47.6]} 5... Bh5 {[%clk 0:02:18.1]} 6. g4 {[%clk 0:02:45.6]} 6... Bg6 {[%clk 0:02:11.1]} 7. g5 {[%clk 0:02:43]} 7... Ne4 {[%clk 0:02:00.7]} 8. h4 {[%clk 0:02:37.8]} 8... Bh5 {[%clk 0:01:55.2]} 9. b4 {[%clk 0:02:28]} 9... Bxb4 {[%clk 0:01:48.3]} 10. c3 {[%clk 0:02:24.1]} 10... Ba5 {[%clk 0:01:45.5]} 11. d3 {[%clk 0:02:21]} 11... Bxf3 {[%clk 0:01:34.3]} 12. Qxf3 {[%clk 0:02:18.3]} 12... f5 {[%clk 0:01:16.1]} 13. dxe4 {[%clk 0:02:15.7]} 13... g6 {[%clk 0:01:07.5]} 14. exf5 {[%clk 0:02:12.8]} 14... gxf5 {[%clk 0:01:04.4]} 15. Qxf5 {[%clk 0:02:10.6]} 15... Rf8 {[%clk 0:00:49.8]} 16. Qxh7 {[%clk 0:02:07.7]} 16... e4 {[%clk 0:00:38.6]} 17. Na3 {[%clk 0:02:03.9]} 17... Bxc3+ {[%clk 0:00:31.4]} 18. Bd2 {[%clk 0:01:57.5]} 18... Bxa1 {[%clk 0:00:29.4]} 19. g6 {[%clk 0:01:52.1]} 19... e3 {[%clk 0:00:22.6]} 20. Bxe3 {[%clk 0:01:49.2]} 20... Qf6 {[%clk 0:00:13.4]} 21. g7 {[%clk 0:01:46.8]} 21... Qxf2+ {[%clk 0:00:09.9]} 22. Bxf2 {[%clk 0:01:39.9]} 22... Rf7 {[%clk 0:00:02.6]} 1-0\n
## 3                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   \n1. d4 {[%clk 0:02:54.1]} 1... e6 {[%clk 0:02:58.8]} 2. e4 {[%clk 0:02:52.3]} 2... h6 {[%clk 0:02:58.2]} 3. Nc3 {[%clk 0:02:50.9]} 3... a6 {[%clk 0:02:57.7]} 4. Nf3 {[%clk 0:02:39.3]} 4... d6 {[%clk 0:02:57.6]} 5. b4 {[%clk 0:02:31.6]} 5... Bd7 {[%clk 0:02:56.8]} 6. b5 {[%clk 0:02:24.8]} 6... Bxb5 {[%clk 0:02:46.6]} 7. d5 {[%clk 0:02:00]} 7... Bxf1 {[%clk 0:02:44.5]} 8. Rxf1 {[%clk 0:01:48]} 8... Nd7 {[%clk 0:02:41.1]} 0-1\n
## 4 \n1. e4 {[%clk 0:04:58.9]} 1... e5 {[%clk 0:04:56.1]} 2. Nc3 {[%clk 0:04:57.1]} 2... d6 {[%clk 0:04:49.3]} 3. Bc4 {[%clk 0:04:55.4]} 3... Nf6 {[%clk 0:04:28.4]} 4. Nf3 {[%clk 0:04:54.2]} 4... Bg4 {[%clk 0:04:24.5]} 5. h3 {[%clk 0:04:51.8]} 5... Bh5 {[%clk 0:04:23.3]} 6. Nxe5 {[%clk 0:04:50.3]} 6... Bxd1 {[%clk 0:04:20.4]} 7. Bxf7+ {[%clk 0:04:48.3]} 7... Ke7 {[%clk 0:04:05.9]} 8. Nd5+ {[%clk 0:04:39.9]} 8... Nxd5 {[%clk 0:03:28.2]} 9. Bxd5 {[%clk 0:04:35.1]} 9... dxe5 {[%clk 0:03:16.7]} 10. O-O {[%clk 0:04:28.4]} 10... Bxc2 {[%clk 0:03:03.8]} 11. d3 {[%clk 0:04:21.5]} 11... Bxd3 {[%clk 0:02:58.8]} 12. Bg5+ {[%clk 0:04:17.8]} 12... Kd7 {[%clk 0:02:38.7]} 13. Rad1 {[%clk 0:04:06.5]} 13... Bxf1 {[%clk 0:02:29]} 14. Bxb7+ {[%clk 0:04:03.9]} 14... Ke6 {[%clk 0:02:14.6]} 15. Bxd8 {[%clk 0:03:59]} 15... Be7 {[%clk 0:01:48.2]} 16. Bxe7 {[%clk 0:03:52.4]} 16... Kxe7 {[%clk 0:01:46.8]} 17. Bxa8 {[%clk 0:03:48.5]} 17... Nc6 {[%clk 0:01:37.5]} 18. Bxc6 {[%clk 0:03:44.3]} 18... Rf8 {[%clk 0:01:32.8]} 19. Rxf1 {[%clk 0:03:42.8]} 19... Kd6 {[%clk 0:01:19.1]} 20. Rc1 {[%clk 0:03:29]} 20... g5 {[%clk 0:01:15]} 21. b4 {[%clk 0:03:27.6]} 21... h5 {[%clk 0:01:07.3]} 22. b5 {[%clk 0:03:25.2]} 22... g4 {[%clk 0:01:05.8]} 23. g3 {[%clk 0:03:23.6]} 23... gxh3 {[%clk 0:01:03.1]} 24. Kh2 {[%clk 0:03:20.9]} 24... Rxf2+ {[%clk 0:00:56.7]} 25. Kxh3 {[%clk 0:03:14.3]} 25... Rxa2 {[%clk 0:00:45.5]} 26. Rd1+ {[%clk 0:03:12.5]} 26... Kc5 {[%clk 0:00:27.9]} 27. Rd5+ {[%clk 0:03:07]} 27... Kc4 {[%clk 0:00:18.3]} 28. Kh4 {[%clk 0:03:03.5]} 28... Rh2+ {[%clk 0:00:15.4]} 29. Kg5 {[%clk 0:02:57.9]} 29... Re2 {[%clk 0:00:00.7]} 30. g4 {[%clk 0:02:55.1]} 1-0\n
## 5                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               \n1. d4 {[%clk 0:04:59.1]} 1... d5 {[%clk 0:04:58.2]} 2. Nc3 {[%clk 0:04:54.4]} 2... c6 {[%clk 0:04:56.9]} 3. Bg5 {[%clk 0:04:47.1]} 3... f6 {[%clk 0:04:50.8]} 4. Bh4 {[%clk 0:04:45.9]} 4... Nd7 {[%clk 0:04:43.6]} 5. Qb1 {[%clk 0:04:36.8]} 5... Nh6 {[%clk 0:04:37.9]} 0-1\n
## 6                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         \n1. e4 {[%clk 0:09:53.2]} 1... e5 {[%clk 0:09:58.5]} 2. Nf3 {[%clk 0:09:48.6]} 2... d5 {[%clk 0:09:55.1]} 3. exd5 {[%clk 0:09:43.2]} 3... e4 {[%clk 0:09:53.7]} 4. Nd4 {[%clk 0:09:38.6]} 4... Bb4 {[%clk 0:09:47.4]} 5. c3 {[%clk 0:09:34.7]} 5... Ba5 {[%clk 0:09:46.2]} 6. c4 {[%clk 0:09:20.9]} 6... e3 {[%clk 0:09:40.4]} 7. fxe3 {[%clk 0:09:09.7]} 7... Nf6 {[%clk 0:09:36.4]} 8. Nb3 {[%clk 0:08:56.8]} 8... Bb4 {[%clk 0:09:30.9]} 9. h3 {[%clk 0:08:32.6]} 9... c6 {[%clk 0:09:22.4]} 10. dxc6 {[%clk 0:08:19.8]} 10... bxc6 {[%clk 0:09:19.1]} 11. g4 {[%clk 0:08:18.2]} 11... Ne4 {[%clk 0:09:09.8]} 12. Bg2 {[%clk 0:07:57]} 12... Qh4+ {[%clk 0:09:03.6]} 13. Kf1 {[%clk 0:07:30.2]} 13... Qf2# {[%clk 0:08:37.7]} 0-1\n
##   winner       Username n_Moves      UserOpponent UserColour OpponentColour
## 1  Black dadosdelaplace       3    DadosDeLaplace      Black          White
## 2  White dadosdelaplace      22 Gotham_darkKnight      Black          White
## 3  Black dadosdelaplace       8    DadosDeLaplace      Black          White
## 4  White dadosdelaplace      30        iankyle124      Black          White
## 5  Black dadosdelaplace       5    DadosDeLaplace      Black          White
## 6  Black dadosdelaplace      13       FilipKing22      Black          White
##   UserELO OpponentELO UserResult DaysTaken                  GameEnding
## 1     736         584        Win    0 days     marchhh67game abandoned
## 2     436         512       Loss    0 days              by resignation
## 3     540         368        Win    0 days      eloycob by resignation
## 4     304         421       Loss    0 days                     on time
## 5     278         234        Win    0 days       Jatin68game abandoned
## 6     982         774        Win    0 days DadosDeLaplace by checkmate
##                                                    Opening
## 1                           Defense-Scandinavian-Variation
## 2                                      Opening-Khan-Gambit
## 3                                 Defense-Normal-Variation
## 4                                              Game-2...d6
## 5                          Pawn-Opening-Chigorin-Variation
## 6 Pawn-Opening-Kings-Knight-Elephant-Paulsen-Countergambit</code></pre>
</div>
<div id="encuestas-electorales-desde-la-wikipedia" class="section level2">
<h2>
<span class="header-section-number">17.12</span> Encuestas electorales (desde la wikipedia)<a class="anchor" aria-label="anchor" href="#encuestas-electorales-desde-la-wikipedia"><i class="fas fa-link"></i></a>
</h2>
<p>Otra forma muy c√≥moda de cargar datos es desde <strong>web sencillas</strong> como la wikipedia. Para ver un ejemplo vamos a cargar las <mark><strong>encuestas electorales</strong></mark> que hab√≠a disponibles para las √∫ltimas elecciones alemanas, desde el enlace <a href="https://es.wikipedia.org/wiki/Elecciones_federales_de_Alemania_de_2021" class="uri">https://es.wikipedia.org/wiki/Elecciones_federales_de_Alemania_de_2021</a></p>
<div class="sourceCode" id="cb1497"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">wiki</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="st">"https://es.wikipedia.org/wiki/"</span>,
              <span class="st">"Elecciones_federales_de_Alemania_de_2021"</span><span class="op">)</span></code></pre></div>
<p>Con <code>read_html</code>, del paquete <a href="https://rvest.tidyverse.org/">rvest</a>, accederemos al c√≥digo HTML de la p√°gina web indicada, y con <code>html_nodes</code> podremos indicarle que queremos seleccionar solo las tablas.</p>
<div class="sourceCode" id="cb1498"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://rvest.tidyverse.org/">rvest</a></span><span class="op">)</span>
<span class="va">html</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/xml2/man/read_xml.html">read_html</a></span><span class="op">(</span><span class="va">wiki</span><span class="op">)</span>
<span class="va">tablas</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/rvest/man/rename.html">html_nodes</a></span><span class="op">(</span><span class="va">html</span>, <span class="st">".wikitable"</span><span class="op">)</span></code></pre></div>
<p>Con <code>html_table</code> podremos indicarle cual de las tablas queremos leer (est√°n guardados en la lista <code>tablas</code>).</p>
<div class="sourceCode" id="cb1499"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">tabla_encuestas_bruto</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/rvest/man/html_table.html">html_table</a></span><span class="op">(</span><span class="va">tablas</span><span class="op">[[</span><span class="fl">5</span><span class="op">]</span><span class="op">]</span>, header <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>
<span class="va">tabla_encuestas_bruto</span></code></pre></div>
<pre><code>## # A tibble: 124 √ó 10
##    X1              X2        X3     X4     X5      X6    X7    X8    X9    X10  
##    &lt;chr&gt;           &lt;chr&gt;     &lt;chr&gt;  &lt;chr&gt;  &lt;chr&gt;   &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;
##  1 Encuesta        Fecha     Muest‚Ä¶ "SPD"  "CDU/C‚Ä¶ "Gr√º‚Ä¶ "FDP" "AfD" "Lin‚Ä¶ Otros
##  2 Encuesta        Fecha     Muest‚Ä¶ ""     ""      ""    ""    ""    ""    Otros
##  3 Wahlkreisprogn‚Ä¶ 22‚Äì24 Se‚Ä¶ 1,400  "25.5" "22.5"  "14"  "12"  "11"  "7"   8    
##  4 Ipsos[85]       22‚Äì23 Se‚Ä¶ 2,000  "26"   "22"    "16"  "12"  "11"  "7"   6    
##  5 Forschungsgrup‚Ä¶ 22‚Äì23 Se‚Ä¶ 1,273  "25"   "23"    "16.‚Ä¶ "11"  "10"  "6"   8.5  
##  6 Forsa[87]       20‚Äì23 Se‚Ä¶ 2,002  "25"   "22"    "17"  "12"  "10"  "6"   8    
##  7 Allensbach[88]  16‚Äì23 Se‚Ä¶ 1,554  "26"   "25"    "16"  "10.‚Ä¶ "10"  "5"   7.5  
##  8 Civey[89]       16‚Äì23 Se‚Ä¶ 10,012 "25"   "23"    "16"  "12"  "10"  "6"   8    
##  9 YouGov[90]      16‚Äì22 Se‚Ä¶ 2,364  "25"   "21"    "14"  "11"  "12"  "7"   9    
## 10 Wahlkreisprogn‚Ä¶ 20‚Äì21 Se‚Ä¶ 1,801  "25"   "21.5"  "15"  "12.‚Ä¶ "11"  "6.5" 8.5  
## # ‚Ä¶ with 114 more rows</code></pre>
<div class="sourceCode" id="cb1501"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">tabla_encuestas_bruto</span><span class="op">)</span></code></pre></div>
<pre><code>##  [1] "X1"  "X2"  "X3"  "X4"  "X5"  "X6"  "X7"  "X8"  "X9"  "X10"</code></pre>
</div>
<div id="exportaci√≥n-de-datos" class="section level2">
<h2>
<span class="header-section-number">17.13</span> Exportaci√≥n de datos<a class="anchor" aria-label="anchor" href="#exportaci%C3%B3n-de-datos"><i class="fas fa-link"></i></a>
</h2>
<p>Aunque se puede exportar en cualquier formato que puedas importar, vamos a ver las <mark><strong>dos formas m√°s √∫tiles y eficientes de exportar datos en <code>R</code></strong></mark>:</p>
<ul>
<li>fichero <code>.RData</code>.</li>
<li>fichero <code>.csv</code> (obviaremos la exportaci√≥n a Excel).</li>
</ul>
<p>La exportaci√≥n en fichero <code>.RData</code> es la opci√≥n <strong>m√°s recomendable si t√∫ o tu equipo solo trabaj√°is con <code>R</code></strong>, es la opci√≥n nativa de fichero, para que su importaci√≥n sea tan sencilla como una funci√≥n <code><a href="https://rdrr.io/r/base/load.html">load()</a></code>. Para exportar en <code>R.Data</code> basta con uses la funci√≥n <code><a href="https://rdrr.io/r/base/save.html">save()</a></code>, ind√≠candole lo que quieres guardar y la ruta donde quieres guardarlo.</p>
<p>Es <strong>importante</strong> entender que la principal ventaja de exportar un fichero <code>.RData</code> es que no se est√° portando una tabla, o un fichero tabulado con un formato de filas y columnas: est√°s exportando <strong>cualquier cosa</strong>, cualquier variable de <code>R</code>, con la naturaleza de esa variable intacta, sin necesidad de pasarlo otro formato.</p>
<div class="sourceCode" id="cb1503"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">nombres</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"javier"</span>, <span class="st">"carla"</span><span class="op">)</span>
<span class="co"># Exportamos en .RData la variable nombres </span>
<span class="fu"><a href="https://rdrr.io/r/base/save.html">save</a></span><span class="op">(</span><span class="va">nombres</span>, file <span class="op">=</span> <span class="st">"./EXPORTAR/nombres.RData"</span><span class="op">)</span></code></pre></div>
<p>Para tenerlo organizado, la orden anterior est√° hecha habiendo creado en nuestra carpeta del proyecto una carpeta <code>EXPORTAR</code> para guardar lo que vayamos exportando. Ese fichero solo podr√° ser abierto por <code>R</code>, pero cuando lo cargemos, tendremos la variable <code>nombres</code> tal cual la hemos guardado.</p>
<p>¬†</p>
<p>No siempre trabajamos en <code>R</code> y a veces necesitamos una exportaci√≥n de un <code>data.frame</code> o una tabla que podamos abrir en nuestra ordenador, ya sea para explic√°rsela a alguien o para envi√°rsela a otra persona. Para ello exportaremos en <code>.csv</code>, un fichero sin formato, y que es capaz de ser abierto por todo tipo de hojas de c√°lculo: basta que usemos la funci√≥n <code><a href="https://rdrr.io/r/utils/write.table.html">write.csv()</a></code>.</p>
<div class="sourceCode" id="cb1504"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Exportamos en .csv el data.frame del ISCIII</span>
<span class="fu"><a href="https://rdrr.io/pkg/readr/man/write_delim.html">write_csv</a></span><span class="op">(</span><span class="va">datos_ISCIII</span>, file <span class="op">=</span> <span class="st">"./EXPORTAR/datos_ISCIII.csv"</span><span class="op">)</span></code></pre></div>
<p>¬†</p>
<p>De la misma manera vamos a <mark><strong>exportar el fichero de encuestas</strong></mark> de Alemania que hemos le√≠do desde la wikipedia.</p>
<div class="sourceCode" id="cb1505"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/pkg/readr/man/write_delim.html">write_csv</a></span><span class="op">(</span><span class="va">tabla_encuestas_bruto</span>,
          <span class="st">"./EXPORTAR/encuestas_alemania_bruto.csv"</span><span class="op">)</span></code></pre></div>
<p><strong><span style="color: #ffc107;">WARNING: l√≠neas de c√≥digo en los errores</span></strong></p>
<p>Dado que los errores del c√≥digo nos vendr√°n referenciados en la consola por el n√∫mero de l√≠nea donde fueron detectados, puede sernos muy √∫til mostrar dichos n√∫meros en la barra lateral izquierda, yendo a <code>Tools &lt;&lt; Global Options &lt;&lt; Code &lt;&lt; Display &lt;&lt; Show line numbers</code></p>
<div class="figure" style="text-align: center">
<span style="display:block;" id="fig:show-line-numbers"></span>
<img src="img/show_line_numbers.jpg" alt="L√≠neas de c√≥digo." width="50%"><p class="caption">
Imagen/gr√°fica 17.2: L√≠neas de c√≥digo.
</p>
</div>
</div>
<div id="consejos-11" class="section level2">
<h2>
<span class="header-section-number">17.14</span> Consejos<a class="anchor" aria-label="anchor" href="#consejos-11"><i class="fas fa-link"></i></a>
</h2>
<p><strong><span style="color: #20935E;">CONSEJOS</span></strong></p>
<p>¬†</p>
<p><strong><span style="color: #20935E;">Margen derecho en la ventana de scripts</span></strong></p>
<p>Aunque no afecte a nuestro c√≥digo escribir todo en una l√≠nea sin saltos de l√≠nea, no somos b√°rbaros/as. ¬øPor qu√© cuadno escribes en un Word lo haces en formato vertical pero cuando programas pones todas las √≥rdenes seguidas? Recuerda que la legibilidad de tu c√≥digo no solo te ahorrar√° tiempo sino que te har√° programar mejor. ¬øC√≥mo podemos fijar un margen imaginario para nosotros ser quienes demos al <em>ENTER</em>? Yendo a <code>Tools &lt;&lt; Global Options &lt;&lt; Code &lt;&lt; Display &lt;&lt; Show margin</code> (es un margen imaginario para ser nosotros quienes lo hagamos efectivo, a <code>R</code> le da igual)</p>
<div class="figure" style="text-align: center">
<span style="display:block;" id="fig:show-margin"></span>
<img src="img/show_margin.jpg" alt="Margen derecho." width="50%"><p class="caption">
Imagen/gr√°fica 17.3: Margen derecho.
</p>
</div>

</div>
</div>
  <div class="chapter-nav">
<div class="prev"><a href="tidy.html"><span class="header-section-number">16</span> Tidy vs messy data: daticos ordenados</a></div>
<div class="next"><a href="rmarkdown.html"><span class="header-section-number">18</span> Contando los datos: rmarkdown</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#importar-exportar"><span class="header-section-number">17</span> Sacando datos de las piedras</a></li>
<li><a class="nav-link" href="#pasajeros-del-rms-titanic-archivo-.rdata"><span class="header-section-number">17.1</span> Pasajeros del RMS Titanic (archivo .RData)</a></li>
<li><a class="nav-link" href="#datos-covid-del-isciii-archivo-.csv"><span class="header-section-number">17.2</span> Datos covid del ISCIII (archivo .csv)</a></li>
<li><a class="nav-link" href="#discursos-de-los-jefes-de-estado-archivo-.txt"><span class="header-section-number">17.3</span> Discursos de los jefes de Estado (archivo .txt)</a></li>
<li><a class="nav-link" href="#pisos-en-boston-archivo-excel-.xlsx"><span class="header-section-number">17.4</span> Pisos en Boston (archivo Excel .xlsx)</a></li>
<li><a class="nav-link" href="#estad%C3%ADsticas-del-eurostat-desde-paquete"><span class="header-section-number">17.5</span> Estad√≠sticas del Eurostat (desde paquete)</a></li>
<li><a class="nav-link" href="#datos-del-aemet-desde-paquete-api"><span class="header-section-number">17.6</span> Datos del AEMET (desde paquete + API)</a></li>
<li><a class="nav-link" href="#canciones-de-spotify-desde-paquete-api"><span class="header-section-number">17.7</span> Canciones de Spotify (desde paquete + API)</a></li>
<li><a class="nav-link" href="#tweets-de-twitter-desde-paquete-api"><span class="header-section-number">17.8</span> Tweets de Twitter (desde paquete + API)</a></li>
<li><a class="nav-link" href="#datos-de-our-world-in-data-paquete"><span class="header-section-number">17.9</span> Datos de Our World in Data (paquete)</a></li>
<li><a class="nav-link" href="#datos-electorales-desde-paquete-api"><span class="header-section-number">17.10</span> Datos electorales (desde paquete + API)</a></li>
<li><a class="nav-link" href="#partidas-de-ajedrez-desde-github"><span class="header-section-number">17.11</span> Partidas de ajedrez (desde Github)</a></li>
<li><a class="nav-link" href="#encuestas-electorales-desde-la-wikipedia"><span class="header-section-number">17.12</span> Encuestas electorales (desde la wikipedia)</a></li>
<li><a class="nav-link" href="#exportaci%C3%B3n-de-datos"><span class="header-section-number">17.13</span> Exportaci√≥n de datos</a></li>
<li><a class="nav-link" href="#consejos-11"><span class="header-section-number">17.14</span> Consejos</a></li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
<li><a id="book-source" href="https://github.com/dadosdelaplace/courses-ECI-2022/blob/master/17-carga_datos.Rmd">View source <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="https://github.com/dadosdelaplace/courses-ECI-2022/edit/master/17-carga_datos.Rmd">Edit this page <i class="fab fa-github"></i></a></li>
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>Analizando datos, visualizando informaci√≥n, contando historias</strong>" was written by Javier √Ålvarez Li√©bana y Gabriel Valverde Castilla. It was last built on √öltima actualizaci√≥n: 24-01-2022.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>
</html>
