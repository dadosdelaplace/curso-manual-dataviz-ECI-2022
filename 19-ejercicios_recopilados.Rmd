```{r echo = FALSE}
library(knitr)

# Color text
colorize <- function(x, color) {
  
  if (knitr::is_latex_output()) {
    
    sprintf("\\textcolor{%s}{%s}", color, x)
    
  } else if (knitr::is_html_output()) {
    
    sprintf("<span style='color: %s;'>%s</span>", color, x)
    
  } else { x }
}
```

# (PART) Recursos {-}

# üìù Ejercicios recopilados

Aqu√≠ haremos una recopilaci√≥n de los ejercicios planteados a lo largo del curso


## Primeros pasos

:::: {.blackbox data-latex=""}

Scripts usados:

* [**script01.R**](https://github.com/dadosdelaplace/courses-ECI-2022/blob/main/scripts/script01.R): toma de contacto.  Ver en <https://github.com/dadosdelaplace/courses-ECI-2022/blob/main/scripts/script01.R>
::::

(haz click en las flechas para ver soluciones)

<details>
  <summary>üìù<strong>Ejercicio 1</strong>: en tu consola (parte inferior de tu pantalla), asigna los valores `2` y `5` a dos variables `a` y `b`. Tras asignarles valores, multiplica los n√∫meros en consola (**haz click** en la flecha para la soluci√≥n propuesta). </summary>
  
<!-- toc -->
- Soluci√≥n:

```{r}
# Para poner comentarios en el c√≥digo se usa #

# Definici√≥n de variables
a <- 2
b <- 5

# Multiplicaci√≥n
a * b
```

```{r consola-multi-1a, echo = FALSE, out.width = "80%", fig.align = "center", fig.cap = "Multiplicaci√≥n de a y b."}
knitr::include_graphics("./img/consola_multiplicacion.jpg")
```

<!-- tocstop -->
</details>

&nbsp;

<details>
  <summary>üìù<strong>Ejercicio 2</strong>: repite el ejercicio anterior pero ahora guarda el resultado de la multiplicaci√≥n en una variable `c`. Para ver el resultado guardado en `c` escribe dicha variable en consola (**haz click** en la flecha para la soluci√≥n propuesta). </summary>
  
<!-- toc -->
- Soluci√≥n:

```{r}
# Variables
a <- 2
b <- 5

# Resultado
c <- a * b

# Muestro en consola
c
```

```{r consola-multi-2a, echo = FALSE, out.width = "80%", fig.align = "center", fig.cap = "Multiplicaci√≥n de a y b guardando el resultado."}
knitr::include_graphics("./img/consola_multiplicacion_2.jpg")
```

<!-- tocstop -->
</details>

&nbsp;

<details>
  <summary>üìù<strong>Ejercicio 3</strong>: asigna ahora los valores `1`, `-2`, `3` a tres variables `a`, `b` y `c`, y calcula la ra√≠z cuadrada de cada uno. </summary>
  
<!-- toc -->
- Soluci√≥n:

```{r}
# Variables
a <- 1
b <- -2
c <- 3

# Resultado
sqrt(a)
sqrt(b)
sqrt(c)
```

<!-- tocstop -->
</details>

&nbsp;


<details>
  <summary>üìù<strong>Ejercicio 4</strong>: repite el ejercicio 2 pero ahora escribe el c√≥digo en un script (fichero `.R`, guardado en [**script01.R**](https://github.com/dadosdelaplace/courses-ECI-2022/blob/main/scripts/script01.R)). Recuerda al acabar seleccionar las l√≠neas a ejecutar y clickar `Run`, o bien guardar el script con `Source on save` activado (**haz click** en la flecha para la soluci√≥n propuesta). </summary>
  
<!-- toc -->
- Soluci√≥n:


```{r consola-multi-3a, echo = FALSE, out.width = "80%", fig.align = "center", fig.cap = "Multiplicaci√≥n de a y b guardando el resultado pero escribiendo en el script."}
knitr::include_graphics("./img/consola_multiplicacion_3.jpg")
```

<!-- tocstop -->
</details>


&nbsp;

<details>
  <summary>üìù<strong>Ejercicio 5</strong>: calcula en consola la suma de 3 m√°s 4, y todo ello multiplicado por 10, y as√≠gnalo a una variable `x` (**haz click** en la flecha para la soluci√≥n propuesta).</summary>
  
<!-- toc -->
- Soluci√≥n:

```{r}
x <- (3 + 4) * 10
```

<!-- tocstop -->
</details>


&nbsp;

<details>
  <summary>üìù<strong>Ejercicio 6</strong>: asigna un valor positivo a `x` y calcula  su ra√≠z cuadrada; asigna otro negativo y calcula su valor absoluto (**haz click** en la flecha para la soluci√≥n propuesta).</summary>
  
<!-- toc -->
- Soluci√≥n:

```{r}
# Ra√≠z cuadrada
x <- 73
sqrt(x)

# Valor absoluto
y <- -73
abs(y)
```

<!-- tocstop -->
</details>

&nbsp;

**`r colorize("CONSEJO:", "#20935E")`**

Las √≥rdenes `sqrt(x)` y `abs(y)` se llaman <mark>**funciones**</mark>, y la variable que tienen entre par√©ntesis se llama **argumento de la funci√≥n**: una variable que toma de entrada la funci√≥n y con la que opera internamente.


&nbsp;

<details>
  <summary>üìù<strong>Ejercicio 7</strong>: usando la variable `x` ya definida, calcula `x - 5` y gu√°rdalo en una nueva variable `z` (**haz click** en la flecha para la soluci√≥n propuesta).</summary>
  
<!-- toc -->
- Soluci√≥n:

```{r}
z <- x - 5
z
```
<!-- tocstop -->
</details>

&nbsp;

<details>
  <summary>üìù<strong>Ejercicio 8</strong>: usando las variables `x` y `z` ya definidas, calcula la ra√≠z cuadrada del m√°ximo entre ambas, y gu√°rdalo en una nueva variable `t`. Hazlo en un script en lugar de en consola (**haz click** en la flecha para la soluci√≥n propuesta).</summary>
  
<!-- toc -->
- Soluci√≥n:

```{r}
t <- sqrt(max(x, z)) 
t
```
<!-- tocstop -->
</details>

&nbsp;

**`r colorize("WARNING:", "#ffc107")`**

No hace falta gastar una l√≠nea por cada orden que quieras ejecutar. Tampoco necesitas guardar cada paso intermedio que realices. **`r colorize("Cuidado con la memoria", "#ffc107")`**: cada asignaci√≥n que hagas es una variable guardada que consume recursos en tu ordenador.





## Tipos de datos

:::: {.blackbox data-latex=""}

Scripts usados:

* [**script02.R**](https://github.com/dadosdelaplace/courses-ECI-2022/blob/main/scripts/script02.R): tipos de datos y funciones usadas con ellos.  Ver en <https://github.com/dadosdelaplace/courses-ECI-2022/blob/main/scripts/script02.R>

::::
(haz click en las flechas para ver soluciones)

<details>
  <summary>üìù<strong>Ejercicio 1</strong>: define una variable que guarde tu edad, otra con tu nombre, otra respondiendo a la pregunta ¬´¬øtengo hermanos?¬ª y otra con la fecha de tu nacimiento. </summary>
  
<!-- toc -->
- Soluci√≥n:

```{r}
edad <- 32 # tipo numeric
nombre <- "Javier" # tipo caracter
hermanos <- TRUE # tipo hermanos
fecha_nacimiento <- as.Date("1989-09-10") # tipo fecha
```

<!-- tocstop -->
</details>

&nbsp;

<details>
  <summary>üìù<strong>Ejercicio 2</strong>: define otra variable con tus apellidos y junta las variables `nombre` y `apellidos` en una sola variable `nombre_completo`. </summary>
  
<!-- toc -->
- Soluci√≥n:

```{r}
# Apellidos
apellidos <- "√Ålvarez Li√©bana"

# Pegamos
nombre_completo <- glue("{nombre} {apellidos}")
nombre_completo

# Otra forma
nombre_completo <- paste(nombre, apellidos)
nombre_completo
```

<!-- tocstop -->
</details>

&nbsp;


<details>
  <summary>üìù<strong>Ejercicio 3</strong>: construye una frase que diga ¬´Hola, me llamo ... y tengo ... a√±os. Nac√≠ el ... de ... de ...¬ª (con el nombre completo). </summary>
  
<!-- toc -->
- Soluci√≥n:

```{r}
dia_nacimiento <- day(fecha_nacimiento)
mes_nacimiento <- month(fecha_nacimiento)
a_nacimiento <- year(fecha_nacimiento)

glue("Hola, me llamo {nombre_completo} y tengo {edad} a√±os. Nac√≠ el {dia_nacimiento} del {mes_nacimiento} de {a_nacimiento}")
```

<!-- tocstop -->
</details>

&nbsp;

<details>
  <summary>üìù<strong>Ejercicio 4</strong>: calcula los d√≠as que han pasado desde la fecha de tu nacimiento </summary>
  
<!-- toc -->
- Soluci√≥n:

```{r}
days(today() - fecha_nacimiento)
```

<!-- tocstop -->
</details>

&nbsp;

<details>
  <summary>üìù<strong>Ejercicio 5</strong>: obt√©n una variable l√≥gica que nos diga si se cumplen (todas) las condiciones i) menor de 30 a√±os; ii) con hermanos; iii) nacido en 1990 o posterior. </summary>
  
<!-- toc -->
- Soluci√≥n:

```{r}
# Se tienen que cumplir todas
edad < 30 & fecha_nacimiento >= as.Date("1990-01-01") & hermanos
```

<!-- tocstop -->
</details>


&nbsp;

<details>
  <summary>üìù<strong>Ejercicio 6</strong>: obt√©n una variable l√≥gica que nos diga si se cumplen (al menos) alguna de las condiciones i) menor de 30 a√±os; ii) con hermanos; iii) nacido en 1990 o posterior. </summary>
  
<!-- toc -->
- Soluci√≥n:

```{r}
# Se tienen que cumplir todas
edad < 30 | fecha_nacimiento >= as.Date("1990-01-01") | hermanos
```

<!-- tocstop -->
</details>


&nbsp;


<details>
  <summary>üìù<strong>Ejercicio 7</strong>: calcula la fecha 11 d√≠as m√°s tarde a tu fecha de nacimiento. Obt√©n la semana del a√±o de dicha fecha y el d√≠a de la semana. </summary>
  
<!-- toc -->
- Soluci√≥n:

```{r}
# Podemos sumar porque es fecha
fecha_post <- fecha_nacimiento + 11
fecha_post

# Semana del a√±o
week(fecha_post)

# D√≠a de la semana (versi√≥n americana, empiezan el domingo)
wday(fecha_post)

# D√≠a de la semana (versi√≥n espa√±ola)
wday(fecha_post, week_start = 1)

# D√≠a de la semana en texto
weekdays(fecha_post)
```

<!-- tocstop -->
</details>


&nbsp;



<details>
  <summary>üìù<strong>Ejercicio 8</strong>: define dos n√∫meros cualesquiera en variable `a` y `b`. Calcula su suma y determina cual es mayor. </summary>
  
<!-- toc -->
- Soluci√≥n:

```{r}
a <- -5
b <- 7

# Suma
c <- a + b
c

# Comparaciones
a == b # ¬øa = b?
a < b # ¬øa < b?
```

<!-- tocstop -->
</details>


&nbsp;





## Vectores

:::: {.blackbox data-latex=""}

Scripts usados:

* [**script03.R**](https://github.com/dadosdelaplace/courses-ECI-2022/blob/main/scripts/script03.R): vectores.  Ver en <https://github.com/dadosdelaplace/courses-ECI-2022/blob/main/scripts/script03.R>

::::


(haz click en las flechas para ver soluciones)

<details>
  <summary>üìù<strong>Ejercicio 1</strong>: define un vector que contenga los n√∫meros 1, 10, -1 y 2, y gu√°rdalo en una variable llamada `vector_num`. </summary>
  
<!-- toc -->
- Soluci√≥n:

```{r}
# Vector de n√∫meros
vector_num <- c(1, 10, -1, 2)
vector_num
```

<!-- tocstop -->
</details>

&nbsp;

<details>
  <summary>üìù<strong>Ejercicio 2</strong>: obt√©n la longitud del vector anterior `vector_num`. </summary>
  
<!-- toc -->
- Soluci√≥n:

```{r}
# Longitud del vector
length(vector_num)
```

<!-- tocstop -->
</details>

&nbsp;


<details>
  <summary>üìù<strong>Ejercicio 3</strong>: crea un vector con las palabras "Hola", "me", "llamo" (y tu nombre y apellidos), y pega luego sus elementos de forma que la frase est√© correctamente escrita en castellano. Tras hacerlo, a√±ade "y tengo 30 a√±os". </summary>
  
<!-- toc -->
- Soluci√≥n:

```{r}
# Definiendo el vector
vector_char <- c("Hola", "me", "llamo", "Javier",
                 "√Ålvarez", "Li√©bana")

# Pegamos
frase <- paste(vector_char, collapse = " ")
frase

# A√±adimos frase
glue("{frase} y tengo 30 a√±os.")

# Otra forma
paste0(frase, " y tengo 30 a√±os.")

# Otra forma
paste(frase, "y tengo 30 a√±os.")
```

<!-- tocstop -->
</details>

&nbsp;


<details>
  <summary>üìù<strong>Ejercicio 4</strong>: crea una secuencia de n√∫meros, que empiece en `-1`, que acabe en `32`, y que vaya saltando de 3 en 3. </summary>
  
<!-- toc -->
- Soluci√≥n:

```{r}
secuencia <- seq(-1, 32, by = 3)
secuencia
length(secuencia) # longitud de la secuencia
```

<!-- tocstop -->
</details>

&nbsp;


<details>
  <summary>üìù<strong>Ejercicio 5</strong>: crea una secuencia de n√∫meros, que empiece en `-1`, que acabe en `32`, y que tenga longitud 12. </summary>
  
<!-- toc -->
- Soluci√≥n:

```{r}
secuencia <- seq(-1, 32, l = 12)
secuencia
length(secuencia) # longitud de la secuencia
```

<!-- tocstop -->
</details>

&nbsp;


<details>
  <summary>üìù<strong>Ejercicio 6</strong>: crea una secuencia que empiece en 1 y recorra todos los naturales hasta el 10. Despu√©s crea otra secuencia de longitud 7 que todos los n√∫meros sean `3`.  </summary>
  
<!-- toc -->
- Soluci√≥n:

```{r}
1:10
rep(3, 7) # secuencia repetida
```

<!-- tocstop -->
</details>

&nbsp;


<details>
  <summary>üìù<strong>Ejercicio 7</strong>: crea una secuencia que repita 5 veces el patr√≥n `1, 2, 3`. Despu√©s crea otra que repita dicho patr√≥n pero de forma intercalada, con 5 veces `1`, despu√©s 5 veces `2` y despu√©s 5 veces `3`.</summary>
  
<!-- toc -->
- Soluci√≥n:

```{r}
rep(c(1, 2, 3), 5) # repetimos patr√≥n (1, 2, 3) 5 veces
rep(c(1, 2, 3), each = 5) # repetimos patr√≥n alternado
```

<!-- tocstop -->
</details>

&nbsp;


<details>
  <summary>üìù<strong>Ejercicio 8</strong>: crea un vector con las edades de cuatro conocidos o familiares. Tras ello, determina cu√°les de ellos tienen menos de 20 a√±os, 30 a√±os o m√°s, menos de 40 a√±os y m√°s de 65 a√±os.</summary>
  
<!-- toc -->
- Soluci√≥n:

```{r}
edades <- c(27, 32, 60, 61) # en mi caso, por ejemplo
edades < 20 # menos de 20 a√±os
edades >= 30 # 30 a√±os o m√°s
edades < 40 # menos de 40 a√±os
edades > 65 # m√°s de 65 a√±os
```

<!-- tocstop -->
</details>







## Operaciones con vectores 

:::: {.blackbox data-latex=""}

Scripts usados:

* [**script04.R**](https://github.com/dadosdelaplace/courses-ECI-2022/blob/main/scripts/script04.R): operaciones con vectores.  Ver en <https://github.com/dadosdelaplace/courses-ECI-2022/blob/main/scripts/script04.R>

::::

(haz click en las flechas para ver soluciones)

<details>
  <summary>üìù<strong>Ejercicio 1</strong>: define de nuevo el vector `vector_num` definido como un vector que contenga los n√∫meros 1, 10, -1 y 2) y calcula su suma del vector. </summary>
  
<!-- toc -->
- Soluci√≥n:

```{r}
# Vector de n√∫meros
vector_num <- c(1, 10, -1, 2)

# Suma
sum(vector_num)
```

<!-- tocstop -->
</details>

&nbsp;

<details>
  <summary>üìù<strong>Ejercicio 2</strong>: define otro vector `vector_num2` que contenga los n√∫meros `5, -7, 8, -3`, y haz la suma de `vector_num` y `vector_num2`. </summary>
  
<!-- toc -->
- Soluci√≥n:

```{r}
# Vector de n√∫meros
vector_num2 <- c(5, -7, 8, -3)

# Suma
vector_num + vector_num2
```

<!-- tocstop -->
</details>

&nbsp;

<details>
  <summary>üìù<strong>Ejercicio 3</strong>: calcula el n√∫mero de elementos mayores que 0 del resultado de la suma de `vector_num` y `vector_num2`. </summary>
  
<!-- toc -->
- Soluci√≥n:

```{r}
# Vector de n√∫meros
vector_suma <- vector_num + vector_num2

# Suma
sum(vector_suma > 0)
```

<!-- tocstop -->
</details>


&nbsp;

<details>
  <summary>üìù<strong>Ejercicio 4</strong>: calcula la versi√≥n ordenada del vector `vector_num`. </summary>
  
<!-- toc -->
- Soluci√≥n:

```{r}
# Ordenamos el vector (con sort)
sort(vector_num)

# Ordenamos el vector  (con order)
vector_num[order(vector_num)]
```

<!-- tocstop -->
</details>

&nbsp;



<details>
  <summary>üìù<strong>Ejercicio 5</strong>: encuentra del vector `vector_num` original el lugar (el √≠ndice) que ocupa su m√≠nimo y su m√°ximo. </summary>
  
<!-- toc -->
- Soluci√≥n:

```{r}
vector_num <- c(1, 10, -1, 2)

# Encontrando el lugar que ocupa el m√°ximo y m√≠nimo
which.max(vector_num)
which.min(vector_num)
```

<!-- tocstop -->
</details>

&nbsp;

<details>
  <summary>üìù<strong>Ejercicio 6</strong>: encuentra del vector `vector_num` los elementos mayores que 1 y menores que 7. Encuentra una forma de averiguar si todos los elementos son o no positivos. </summary>
  
<!-- toc -->
- Soluci√≥n:

```{r}
# Vector l√≥gico: mayores que 1 y menores que 7
vector_num > 1 & vector_num < 7

# ¬øSon todos positivos?
all(vector_num > 0)
```

<!-- tocstop -->
</details>

&nbsp;

<details>
  <summary>üìù<strong>Ejercicio 7</strong>: define el vector `c(-1, 0, 4, 5, -2)`, calcula la ra√≠z cuadrada del vector y determina que lugares son ausente de tipo `NaN`. </summary>
  
<!-- toc -->
- Soluci√≥n:

```{r}
# Vector
x <- c(-1, 0, 4, 5, -2)

# ¬øCu√°les son ausentes tras aplicar la ra√≠z cuadrada?
is.nan(sqrt(x))
```

<!-- tocstop -->
</details>

&nbsp;

<details>
  <summary>üìù<strong>Ejercicio 8</strong>: define el vector de los primeros n√∫meros impares (hasta el 21) y extrae los elementos que ocupan los lugares 1, 4, 5, 8. Elimina del vector el segundo elemento</summary>
  
<!-- toc -->
- Soluci√≥n:

```{r}
# Vector de impares (de 1 a 21 saltando de dos en dos)
x <- seq(1, 21, by = 2)

# Seleccionamos elementos
x[c(1, 4, 5, 8)]

# Eliminamos elementos
y <- x[-2]
y
```

<!-- tocstop -->
</details>




## Estructuras de datos: matrices y tablas (data.frame)

:::: {.blackbox data-latex=""}

Scripts usados:

* [**script05.R**](https://github.com/dadosdelaplace/courses-ECI-2022/blob/main/scripts/script05.R): matrices y data.frames.  Ver en <https://github.com/dadosdelaplace/courses-ECI-2022/blob/main/scripts/script05.R>
::::

(haz click en las flechas para ver soluciones)

<details>
  <summary><strong>Ejercicio 1</strong>: define una matriz `x` de ceros de 3 filas y 7 columnas.</summary>

- Soluci√≥n:

```{r}
# Matriz
x <- matrix(0, nrow = 3, ncol = 7)
x

(x + 1) / 5
```

</details>

&nbsp; 

<details>
  <summary><strong>Ejercicio 2</strong>: a la matriz anterior, suma un 1 a cada n√∫mero de la matriz y divide el resultado entre 5.</summary>

- Soluci√≥n:

```{r}
(x + 1) / 5
```

</details>

&nbsp; 


<details>
  <summary><strong>Ejercicio 3</strong>: tras definir la matriz `x` calcula su transpuesta y obt√©n sus dimensiones</summary>

- Soluci√≥n:

```{r}
# Transpuesta
t(x)

# Dimensiones transpuesta: pasa de ser 3x7 a 7x3
dim(t(x))
ncol(t(x)) # n√∫mero de columnas de la transpuesta
nrow(t(x)) # n√∫mero de filas de la transpuesta
```

</details>

&nbsp;

<details>
  <summary><strong>Ejercicio 4</strong>: el siguiente c√≥digo define una matriz de dimensiones `4 x 3` y calcula la suma por columnas. Modifica el c√≥digo para que realice la suma por filas.
  
```{r}
# Matriz
matriz <- matrix(1:12, nrow = 4)

# Suma por columnas
apply(matriz, MARGIN = 2, FUN = "sum")
```
</summary>


- Soluci√≥n:

```{r}
# Matriz
matriz <- matrix(1:12, nrow = 4)

# Suma por filas
apply(matriz, MARGIN = 1, FUN = "sum")
```
</details>

&nbsp; 

<details>
  <summary><strong>Ejercicio 5</strong>: con la matriz `matrix(1:12, nrow = 4)` anterior, calcula la media de todos los elementos, la media de cada fila y la media de cada columna.</summary>

- Soluci√≥n:

```{r}
# Matriz
matriz <- matrix(1:12, nrow = 4)

#  media de todos
mean(matriz)

# Media por filas (MARGIN = 1 ya que es una operaci√≥n por filas)
apply(matriz, MARGIN = 1, FUN = "mean")

# Media por filas (MARGIN = 2 ya que es una operaci√≥n por filas)
apply(matriz, MARGIN = 2, FUN = "mean")
```
</details>

&nbsp; 

<details>
  <summary><strong>Ejercicio 6</strong>: el `data.frame` llamado `mammals` contiene el peso medio del cerebro (gramos) y el cuerpo (kilogramos) de 62 especies de mam√≠feros terrestres distintos (al que puedes acceder desde el paquete `{MASS}`). Obt√©n el nombre de las variables y visualiza las primeras filas (cabecera de la tabla). Visualiza por consola las columnas con `$`.
  
```{r eval = FALSE}
# si no est√° ya instalado el paquete hay que hacer install.packages("MASS")
? MASS::mammals # para ver info del conjunto de datos 
```
</summary>
  
- Soluci√≥n:

```{r}
# Nombres de variables
names(MASS::mammals)

# Cabecera
head(MASS::mammals)

# Columnas
MASS::mammals$body
MASS::mammals$brain
```

</details>


&nbsp; 

<details>
  <summary><strong>Ejercicio 7</strong>: modifica el c√≥digo inferior para que nos filtre solo con los mam√≠feros con un peso corporal superior a 15 kg.
  
```{r}
# Filtramos filas
filtro_fila <- subset(MASS::mammals, subset = body < 35)
filtro_fila
```
</summary>
  
- Soluci√≥n:

```{r}
# Filtramos filas
filtro_fila <- subset(MASS::mammals, subset = body > 15)
filtro_fila
```

</details>

&nbsp; 

<details>
  <summary><strong>Ejercicio 8</strong>: del conjunto `mammals` selecciona aquellos mam√≠feros terrestres cuyo peso corporal (`body`) sea superior a 20 kg.</summary>
  
- Soluci√≥n:

```{r}
# Filtramos filas
filtro_fila <- subset(MASS::mammals, subset = body > 20)
filtro_fila
```

</details>

&nbsp; 

<details>
  <summary><strong>Ejercicio 9</strong>: modifica el siguiente c√≥digo para quedar solo con la variable `brain`.
  
```{r}
filtro_col <- subset(MASS::mammals,  select = c("body"))
filtro_col
```
</summary>
  
- Soluci√≥n:

```{r}
# Filtramos columnas
filtro_col <- subset(MASS::mammals,  select = c("brain"))
filtro_col
```

</details>


&nbsp; 

<details>
  <summary><strong>Ejercicio 10</strong>: del conjunto `mammals` selecciona a la vez aquellos animales cuyo peso corporal supera los 20kg, pero selecciona solo la columna `brain`.</summary>
  
- Soluci√≥n:

```{r}
# Todo de una vez
filtro <- subset(MASS::mammals, subset = body > 20, select = c("brain"))
filtro
```

</details>


&nbsp; 

<details>
  <summary><strong>Ejercicio 11</strong>: calcula el n√∫mero de filas borradas del ejercicio anterior. Tras hacer todo ello, traduce a castellano el nombre de las columnas del `data.frame` filtrado.</summary>
  
- Soluci√≥n:

```{r}
# Filas borradas
nrow(MASS::mammals) - nrow(filtro)

# Cambiamos nombres a castellano del conjunto filtrado
names(filtro) <- c("peso_cerebro_gr")
```

</details>

&nbsp; 

<details>
  <summary><strong>Ejercicio 12</strong>: el nombre de los mam√≠feros solo est√° disponible como nombre de fila. Cons√∫ltalos y gu√°rdalos en una nueva variable que incorpores a los datos originales.</summary>
  
- Soluci√≥n:

```{r}
# Nombre de los mam√≠feros
nombres <- row.names(MASS::mammals)

# A√±adimos nombres como columna para poder ser usada
data.frame(nombres, MASS::mammals)
```

</details>

&nbsp; 





## Estructuras condicionales

:::: {.blackbox data-latex=""}

Scripts usados:

* [**script07.R**](https://github.com/dadosdelaplace/courses-ECI-2022/blob/main/scripts/script07.R): if-else.  Ver en <https://github.com/dadosdelaplace/courses-ECI-2022/blob/main/scripts/script07.R>
::::

(haz click en las flechas para ver soluciones)

<details>
  <summary>üìù<strong>Ejercicio 1</strong>: modifica el c√≥digo inferior para imprimir un mensaje por pantalla si todos los mam√≠feros del conjunto `MASS::mammals` pesan menos de una tonelada (variable `body`).
  
```{r}
peso <- MASS::mammals$body

if (peso[1] == 1000) {
  
  print("Todos los mam√≠feros guardados pesan menos de una tonelada")
  
}
  
```
</summary>
  
<!-- toc -->
- Soluci√≥n:

```{r}
peso <- MASS::mammals$body

if (all(peso < 1000)) {
  
  print("Todos los mam√≠feros guardados pesan menos de una tonelada")
  
}

```

<!-- tocstop -->
</details>

&nbsp;

<details>
  <summary>üìù<strong>Ejercicio 2</strong>: modifica el c√≥digo inferior para imprimir un mensaje por pantalla si alguno de los mam√≠feros del conjunto `MASS::mammals` pesan menos de una tonelada (variable `body`).
  
```{r}
peso <- MASS::mammals$body

if (peso[1] == 1000) {
  
  print("Alguno de los mam√≠feros guardados pesan menos de una tonelada")
  
}
  
```
</summary>
  
<!-- toc -->
- Soluci√≥n:

```{r}
peso <- MASS::mammals$body

if (any(peso < 1000)) {
  
  print("Alguno de los mam√≠feros guardados pesan menos de una tonelada")
  
}

```

<!-- tocstop -->
</details>

&nbsp;

<details>
  <summary>üìù<strong>Ejercicio 3</strong>: modifica el c√≥digo inferior para imprimir un mensaje por pantalla si el tercer mam√≠fero del conjunto `MASS::mammals` tiene un cerebro que pesa m√°s de 100 gr (variable `brain`).
  
```{r}
peso <- MASS::mammals$body

if (peso[1] == 1000) {
  
  print("El tercer mam√≠fero tiene un cerebro que pesa m√°s de 100 gr.")
  
}
  
```

</summary>
  
<!-- toc -->
- Soluci√≥n:

```{r}
cerebro <- MASS::mammals$brain

if (cerebro[3] > 100) {
  
  print("El tercer mam√≠fero tiene un cerebro que pesa m√°s de 100 gr.")
  
}

```

No imprime nada porque no cumple la condici√≥n.


<!-- tocstop -->
</details>

&nbsp;

<details>
  <summary>üìù<strong>Ejercicio 4</strong>: del paquete `{lubridate}`, la funci√≥n `hour()` nos devuelve la hora de una fecha dada, y la funci√≥n `now()` nos devuelve fecha y hora del momento actual. Con ambas funciones, y usando `if`, imprime por pantalla  `"buenas noches"` solo a partir de las 21 horas. </summary>
  
<!-- toc -->
- Soluci√≥n:

```{r}
# Cargamos librer√≠a
library(lubridate)

# Fecha-hora actual
fecha_actual <- now()

# Estructura if
if (hour(fecha_actual) > 21) {
  
  cat("Buenas noches") # print/cat dos formas de imprimir por pantalla
}
```

<!-- tocstop -->
</details>

&nbsp;


<details>
  <summary>üìù<strong>Ejercicio 5</strong>: con las funciones del ejercicio anterior, y usando una estructura `if-else`, imprime por pantalla `"buenos d√≠as"` (de 6 a 14 horas), `"buenas tardes"` (de 14 a 21 horas) o `"buenas noches"` (de las 21 a las 6 horas). </summary>
  
<!-- toc -->
- Soluci√≥n:

```{r}
# Fecha actual
fecha_actual <- now()

# Estructura if-else
if (hour(fecha_actual) > 6 & hour(fecha_actual) < 14) {
  
  cat("Buenos d√≠as")
  
} else if (hour(fecha_actual) > 14 & hour(fecha_actual) < 21) {
  
  cat("Buenas tardes")
  
} else {
  
  cat("Buenas noches")
}
```

<!-- tocstop -->
</details>

&nbsp;


<details>
  <summary>üìù<strong>Ejercicio 6</strong>: realiza el ejercicio anterior pero sin estructura de llaves, de forma concisa con `ifelse()`. Mira la ayuda si la necesitases poniendo `? ifelse`. </summary>
  
<!-- toc -->
- Soluci√≥n:

```{r}
# Fecha actual
fecha_actual <- now()

# Estructura if-else
cat(ifelse(hour(fecha_actual) > 6 & hour(fecha_actual) < 14,
           "Buenos d√≠as",
           ifelse(hour(fecha_actual) > 14 &
                    hour(fecha_actual) < 21,
                  "Buenas tardes", "Buenas noches")))
  
```

<!-- tocstop -->
</details>

&nbsp;



## Bucles

:::: {.blackbox data-latex=""}

Scripts usados:

* [**script08.R**](https://github.com/dadosdelaplace/courses-ECI-2022/blob/main/scripts/script08.R): if-else.  Ver en <https://github.com/dadosdelaplace/courses-ECI-2022/blob/main/scripts/script08.R>
::::

(haz click en las flechas para ver soluciones)

<details>
  <summary>üìù<strong>Ejercicio 1</strong>: modifica el c√≥digo interior para dise√±ar un bucle `for` de 5 iteraciones que recorra los 5 primeros impares y les sume uno.
  
```{r}
for (i in 1:5) {
  
  print(i)
}
```

</summary>
  
<!-- toc -->
- Soluci√≥n:

```{r}
# Una forma
for (i in seq(1, 9, by = 2)) {
  
  print(i + 1)
}

# Otra
for (i in c(1, 3, 5, 7, 9)) {
  
  print(i + 1)
}
```

<!-- tocstop -->
</details>

&nbsp;

<details>
  <summary>üìù<strong>Ejercicio 2</strong>: modifica el c√≥digo interior para dise√±ar un bucle `while` que parta con una variable `conteo <- 1` y pare cuando llegue a 6.
  
```{r}
conteo <- 1
while (conteo == 2) {
  
  print(conteo)
}
```

</summary>
  
<!-- toc -->
- Soluci√≥n:

```{r}
conteo <- 1
while (conteo < 6) {
  
  print(conteo)
  conteo <- conteo <- conteo + 1
}
```

<!-- tocstop -->
</details>

&nbsp;


<details>
  <summary>üìù<strong>Ejercicio 3</strong>: construye un bucle que recorra las primeras 8 filas del conjunto de datos `MASS::mammals` y que imprima el peso del animal (en kg) multiplicado por 1000 (gramos).

</summary>
  
<!-- toc -->
- Soluci√≥n:

```{r}
for (i in 1:8) {
  
  print(MASS::mammals$body[i] * 1000)
}
```

<!-- tocstop -->
</details>

&nbsp;


<details>
  <summary>üìù<strong>Ejercicio 4</strong>: dise√±a un bucle `for` de 200 iteraciones que, empezando en un valor inicial de 100 (euros), te sume 3‚Ç¨ si el n√∫mero actual es par y te reste 5‚Ç¨ si es impar.

Un n√∫mero par o impar: un n√∫mero par ser√° todo aquel n√∫mero que al dividir entre 2, la divisi√≥n es exacta, es decir, que su resto es nulo. Por ejemplo, al dividir 5 entre 2, el resto es 1, pero al dividir 12 entre 2 el resto es 0. Para calcula ese resto usaremos la funci√≥n `%%`.

```{r}
5 %% 2
12 %% 2
23 %% 2
46 %% 2
```
</summary>
  
<!-- toc -->
- Soluci√≥n:


```{r}
# dinero inicial
dinero <- 100

# Bucle for
for (i in 1:200) {
  
  dinero <- ifelse(dinero %% 2 == 0, dinero + 3, dinero  - 5)
  
}
dinero
```

<!-- tocstop -->
</details>

&nbsp;

<details>
  <summary>üìù<strong>Ejercicio 5</strong>: dise√±a el anterior bucle pero guardando el dinero de cada iteraci√≥n.</summary>
  
<!-- toc -->
- Soluci√≥n:

```{r}
# vector de importes
dinero <- rep(0, 201)
dinero[1] <- 100 # dinero inicial

# Bucle for
for (i in 2:201) {
  
  # si dinero[i - 1] es par o  impar
  dinero[i] <- ifelse(dinero[i - 1] %% 2 == 0, dinero[i - 1] + 3,
                      dinero[i - 1]  - 5)
  
}
dinero
```

<!-- tocstop -->
</details>

&nbsp;

<details>
  <summary>üìù<strong>Ejercicio 6</strong>: dise√±a el bucle del ejercicio 4 parando cuando no nos quede dinero.</summary>
  
<!-- toc -->
- Soluci√≥n:

```{r}
dinero <- 100 # dinero inicial

# Bucle while
while (dinero > 0) {
  
  dinero <- ifelse(dinero %% 2 == 0, dinero + 3, dinero - 5)
  
}
dinero
```

<!-- tocstop -->
</details>




